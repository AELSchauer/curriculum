
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Minitest Techniques - Jumpstart Lab Curriculum</title>
  <meta name="author" content="Jumpstart Lab">

  
  <meta name="description" content="Minitest Techniques                              Want to learn Minitest?Well, you came to the right place!But first &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://tutorials.jumpstartlab.com/academy/workshops/minitest_techniques.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection, print" rel="stylesheet" type="text/css">

  <link href="/atom.xml" rel="alternate" title="Jumpstart Lab Curriculum" type="application/atom+xml">

  <!-- TAB SLIDE OUT -->
  <script src="/javascripts/jquery-1.3.2.min.js" type="text/javascript"></script>
  <script src="/javascripts/jquery.tabSlideOut.v1.3.js"></script>

  <!-- SEARCH -->
  <script src="/search.js"></script>

  <script type="text/javascript">
    $(function(){
      $('.slide-out-div').tabSlideOut({
        tabHandle: '.handle',                     //class of the element that will become your tab
        pathToTabImage: '/images/feedback_tabv2.png', //path to the image for the tab //Optionally can be set using css
        imageHeight: '130px',                     //height of tab image           //Optionally can be set using css
        imageWidth: '36px',                       //width of tab image            //Optionally can be set using css
        tabLocation: 'left',                      //side of screen where tab lives, top, right, bottom, or left
        speed: 300,                               //speed of animation
        action: 'click',                          //options: 'click' or 'hover', action to trigger animation
        topPos: '200px',                          //position from the top/ use if tabLocation is left or right
        leftPos: '20px',                          //position from left/ use if tabLocation is bottom or top
        fixedPosition: true                      //options: true makes it stick(fixed position) on scroll
        });
      });
  </script>

  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

</head>

<body  >
  <header role="banner">
    <hgroup>
  <h1>Jumpstart Lab Curriculum</h1>
  
</hgroup>

  </header>

  <nav role="navigation">
    <ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:tutorials.jumpstartlab.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>

<ul class="main-navigation">
  <li><a href="/">Curriculum Index</a></li>
  <li><div id="search">
  <form>
    <input type="text" id="st-search-input" class="st-search-input" />
  </form>
</div>
</li>
</ul>
  </nav>

  <div id="main">
    <div id="content">
      <div>
  <article role="article">
    
    
      <header>
        <h1 class="entry-title">
          Minitest Techniques
        </h1>
        
      </header>
    
    <p>Want to learn <a href="https://github.com/seattlerb/minitest">Minitest</a>?
Well, you came to the right place!
But first, you&#8217;ll need to go clone <a href="https://github.com/turingschool/minitest_playground">minitest_playground</a>
So you can complete the <strong>YOUR TURN</strong> portions.</p>

<h2>Foundational Information</h2>

<h3>Setup</h3>

<ul>
<li>Install minitest from the command line with <code>$ gem install minitest</code></li>
<li>Files typically go in <code>test</code> dir.</li>
<li>Common setup in <code>test/test_helper.rb</code> then you can require that at the top of any test file that needs the common setup</li>
</ul>

<h3>Writing Tests</h3>

<ul>
<li>Put <code>gem &quot;minitest&quot;</code> before you require any minitest files to tell Ruby to use the gem we installed instead of the old version of Minitest that it shipped with.</li>
<li>Load up and run minitest by requiring &quot;minitest/autorun&quot; (probably put this at the top of <code>test_helper.rb</code>)</li>
<li>The default way to add a suite of tests is to make a class that inherits from <code>Minitest::Test</code></li>
<li>The default way to add a test to a suite is to define a method that begins with <code>test_</code></li>
<li>The default way to assert that code does what you want is <code>assert(boolean_value)</code></li>
</ul>

<h3>Running Tests</h3>

<p>Run tests from the command line by passing the name of the test file to ruby: <code>$ ruby test/something_test.rb</code></p>

<h4>Your Turn: Write Two Tests</h4>

<p>Create a test suite named <code>SimpleTest</code> in <code>test/simple_test.rb</code> with two tests, one of which passes, the other fails.
Run it with <code>$ ruby test/simple_test.rb</code>.</p>

<h3>Test Order</h3>

<p>You can reproduce the random order with the command line arguments <code>--seed &lt;value&gt;</code>, minitest tells you what seed it is using at the top of every run.</p>

<h4>Your Turn: Intermittent Failure</h4>

<p>Reproduce the intermittent failure in <code>test/seed_test.rb</code></p>

<h3>Running Certain Tests</h3>

<ul>
<li>You can run a specific test with <code>--name test_name</code></li>
<li>You can run tests that match a regular expression with <code>--name '/address/'</code></li>
</ul>

<h4>Your Turn: Filtering Tests</h4>

<p>Filter the tests that run in <code>test/filtering_test.rb</code></p>

<h3>Test Instances</h3>

<p>Each test method is invoked on a unique instance of the class (i.e. for each test method, instantiate the class and then invoke the method)</p>

<h4>Your Turn: Instance Experiments</h4>

<p>Prove to yourself that each test runs on its own instance in <code>test/each_test_runs_in_its_own_instance_test.rb</code></p>

<h3>Working with Support Code</h3>

<p>Often you need support code. You could put it all in the test helper, but that would get big, and require every test that loads the helper to load that code,
  whether they need it or not (some code is expensive to load). A common pattern is to put it in a <code>test/support/</code> directory.</p>

<h4>Your Turn: Organizing Support Code</h4>

<p>Move the support code from the test helper to the support dir and show that <code>test/uses_support_test.rb</code> still works</p>

<h3>Skipping Tests</h3>

<p>Some tests just aren&#8217;t ready yet, to bypass them, invoke the <code>skip</code> method</p>

<h4>Your Turn: Adding Skips</h4>

<p>Skip the unfinished feature in <code>test/skip_test.rb</code></p>

<h3>Capturing Standard Out</h3>

<p>If you want to capture strings that were printed to standard output and standard error, you can run use <code>capture_io</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">out</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">capture_io</span> <span class="k">do</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;hello&quot;</span>
</span><span class='line'>  <span class="vg">$stderr</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;world&quot;</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="n">out</span> <span class="c1"># =&gt; &quot;hello\n&quot;</span>
</span><span class='line'><span class="n">err</span> <span class="c1"># =&gt; &quot;world\n&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<h4>Your Turn: Capturing Output</h4>

<p>Go capture the output from <code>test/capture_output_test.rb</code></p>

<h2>Nesting</h2>

<p>Sometimes you want to a test suite within a test suite. For example, if I have several things I want to test about one method.
The best way to do this is to define the inner test suite within the outer one, and then inherit from it.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">ParentSuite</span> <span class="o">&lt;</span> <span class="no">Minitest</span><span class="o">::</span><span class="no">Test</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># No tests in here, just helper methods</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">some_helper_method</span>
</span><span class='line'>    <span class="kp">true</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Nested suite inherits from parent suite</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">NestedSuite</span> <span class="o">&lt;</span> <span class="no">ParentSuite</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">test_something</span>
</span><span class='line'>      <span class="c1"># I can call assertion helpers because I get them from ParentSuite</span>
</span><span class='line'>      <span class="c1"># Which gets them from Minitest::Test</span>
</span><span class='line'>      <span class="c1"># Which gets them from Minitest::Assertions</span>
</span><span class='line'>      <span class="c1">#</span>
</span><span class='line'>      <span class="c1"># And I can call the helper method because</span>
</span><span class='line'>      <span class="c1"># I inherit from ParentSuite, where it is defined</span>
</span><span class='line'>      <span class="n">assert</span> <span class="n">some_helper_method</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<h4>Your Turn: Nested Tests</h4>

<p>Go implement the nested test suites in <code>test/nesting_test.rb</code></p>

<h2>Asssertions</h2>

<p>While the basic <code>assert</code> method is all you technically need, it&#8217;s not very descriptive or informative.
There are a variety of more interesting and useful assertions.</p>

<p>Anything method asserting that a statement is truthful begins with <code>assert_</code> and
anything asserting that a statement is not truthful begins with <code>refute_</code></p>

<h4>Your Turn: Learning Assertions</h4>

<p>There is a test suite around several of these in <code>test/assertions_test.rb</code> go update the methods to use the fancy assertions.</p>

    
    
      <footer>
        
        
          <div class="sharing">
  
  
</div>

        
      </footer>
    
  </article>


</div>



    </div>

    <div class="footer">
  <p>
    All materials licensed <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0</a>&nbsp;
    <img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png" />
  </p>
</div>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-42709122-1', 'jumpstartlab.com');
ga('send', 'pageview');
</script>
  </div>

  


  <div class="slide-out-div">
  <a class="handle" href="#">Feedback</a>
  <h3>Have Feedback?</h3>
  <p>Did you find an error? Something confusing? We'd love your help:</p>
  <ul>
    <li><a href="#" id="edit_source">Edit the source code of this page directly on GitHub</a></li>
    <li><a href="https://github.com/JumpstartLab/curriculum/issues">Create a new issue on the project's GitHub page</a></li>
  </ul>
  <p>Thanks!</p>
</div>

<script>
  $(function(){
    var pathname = window.location.pathname.replace( ".html", ".markdown" );
    var github_url = "https://github.com/JumpstartLab/curriculum/blob/master/source" + pathname;
    $("a#edit_source").attr('href', github_url);
  });
</script>

</body>
</html>
