
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Fundamental SQL - Jumpstart Lab Curriculum</title>
  <meta name="author" content="Jumpstart Lab">

  
  <meta name="description" content="Fundamental SQL                              Databases are at the core of almost every web application. They are &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://tutorials.jumpstartlab.com/topics/sql/fundamental_sql.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection, print" rel="stylesheet" type="text/css">

  <link href="/atom.xml" rel="alternate" title="Jumpstart Lab Curriculum" type="application/atom+xml">

  <!-- TAB SLIDE OUT -->
  <script src="/javascripts/jquery-1.3.2.min.js" type="text/javascript"></script>
  <script src="/javascripts/jquery.tabSlideOut.v1.3.js"></script>

  <!-- SEARCH -->
  <script src="/search.js"></script>

  <script type="text/javascript">
    $(function(){
      $('.slide-out-div').tabSlideOut({
        tabHandle: '.handle',                     //class of the element that will become your tab
        pathToTabImage: '/images/feedback_tabv2.png', //path to the image for the tab //Optionally can be set using css
        imageHeight: '130px',                     //height of tab image           //Optionally can be set using css
        imageWidth: '36px',                       //width of tab image            //Optionally can be set using css
        tabLocation: 'left',                      //side of screen where tab lives, top, right, bottom, or left
        speed: 300,                               //speed of animation
        action: 'click',                          //options: 'click' or 'hover', action to trigger animation
        topPos: '200px',                          //position from the top/ use if tabLocation is left or right
        leftPos: '20px',                          //position from left/ use if tabLocation is bottom or top
        fixedPosition: true                      //options: true makes it stick(fixed position) on scroll
        });
      });
  </script>

  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

</head>

<body  >
  <header role="banner">
    <hgroup>
  <h1>Jumpstart Lab Curriculum</h1>
  
</hgroup>

  </header>

  <nav role="navigation">
    <ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:tutorials.jumpstartlab.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>

<ul class="main-navigation">
  <li><a href="/">Curriculum Index</a></li>
  <li><div id="search">
  <form>
    <input type="text" id="st-search-input" class="st-search-input" />
  </form>
</div>
</li>
</ul>
  </nav>

  <div id="main">
    <div id="content">
      <div>
  <article role="article">
    
    
      <header>
        <h1 class="entry-title">
          Fundamental SQL
        </h1>
        
      </header>
    
    <p>Databases are at the core of almost every web application. They are our means of storing, fetching, calculating, and sorting data.</p>

<h2>SQL</h2>

<p><em>S</em>tructured <em>Q</em>uery <em>L</em>anguage is how we interact with most databases. Through carefully constructed SQL instructions we can create, modify, or delete tables. We can find existing data within tables, insert new data, or change what&#8217;s there. We can add modifiers to our queries to scope them down to only entries matching certain criteria, or calculate aggregates on the fly.</p>

<p>While it&#8217;s somewhat English-like and approachable, don&#8217;t be confused: SQL is a programming language. Using it effectively necessitates the same care and attention put into any program.</p>

<h3>Database Engines</h3>

<p>There are many different database systems. The most popular SQL-based databases include PostgreSQL, MySQL, Oracle, MS SQL Server, and SQLite.</p>

<p>The core techniques of SQL are common to all of these systems. Hypothetically your queries and data should be portable between each of them.</p>

<p>In reality, database engines tend to follow Microsoft&#8217;s old strategy of &quot;embrace and extend.&quot; They implement the core SQL specification, then add on a lot of custom functionality. That extra functionality makes your job easier, performance better, or some other benefit &#8211; but now you&#8217;ve strayed from the standard and your code is tied to one database engine.</p>

<p>In general our advice is:</p>

<ul>
<li>SQLite: Great for experiments and local development, never use in production</li>
<li>MySQL: Popular and widely available, but avoid it if you can</li>
<li>PostgreSQL: The best choice for both development and production</li>
<li>MS SQL Server/Oracle: Trusting your production stack to closed-source code is a non-starter</li>
</ul>

<h4>Tutorial Experiments</h4>

<p>For the purposes of this tutorial we&#8217;ll use SQLite3, built into MacOS X and <a href="http://www.sqlite.org/download.html">installable on Windows</a>.</p>

<h2>Hands-On Experiments</h2>

<p>We could talk on and on about databases, but it&#8217;ll make more sense if you dig in and get your hands dirty.</p>

<h3>A Little SQLite Background</h3>

<p>Most databases store your data in a hidden-away part of your computer&#8217;s filesystem. You&#8217;d never interact with the data directly, only through the tools provided by the database engine.</p>

<p>SQLite, instead, stores its data in a plain-text file. This makes it incredibly easy to move, rename, delete, or transfer the database.</p>

<h3>Getting Started</h3>

<p>Create a project directory we&#8217;ll call <code>fundamental_sql</code>. Switch into that project directory and fire up SQLite:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>sqlite3 example.sqlite3</span><span class='line output'>SQLite version 3.7.7 2011-06-25 16:35:41</span><span class='line output'>Enter ".help" for instructions</span><span class='line output'>Enter SQL statements terminated with a ";"</span><span class='line output'>sqlite></span></code></pre></td></tr></table></div></div>
        </div>

<p>You&#8217;ve run the <code>sqlite3</code> command-line tool, told it to create a database in the file <code>example.sqlite3</code>, and now the prompt is waiting for instruction.</p>

<h3>Creating a Table</h3>

<p>The first thing to do is create a table:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<br></pre></td><td class='code'><pre><code><span class='line output'>sqlite> CREATE TABLE fruits(id INTEGER PRIMARY KEY AUTOINCREMENT, name VARCHAR(31), quantity INT);</span></code></pre></td></tr></table></div></div>
        </div>

<p>SQL commands are not case sensitive, but the convention is to write SQL instructions/keywords in ALL UPPERCASE and write data/names in lowercase.</p>

<p>This instruction creates a table named <code>fruits</code> that has three columns:</p>

<ul>
<li>an <code>id</code> column that is an &quot;autoincrement primary key&quot;. That means whenever we insert a row into the table, the database engine will automatically assign a unique ID number to the row. The first row will get ID 1, the second one ID 2, etc. IDs will never be repeated.</li>
<li>a <code>name</code> column that is type <code>VARCHAR</code> or &quot;variable character&quot;, like a string, with a maximum length of 31 characters</li>
<li>a <code>quantity</code> column that is an integer</li>
</ul>

<h3>Inserting Data</h3>

<p>Let&#8217;s try inserting two fruits into our table:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>sqlite> INSERT INTO fruits(name, quantity) VALUES ('apples', 6);</span><span class='line output'>sqlite> INSERT INTO fruits(name, quantity) VALUES ('oranges', 12);</span><span class='line output'>sqlite> INSERT INTO fruits(name, quantity) VALUES ('bananas', 18);</span></code></pre></td></tr></table></div></div>
        </div>

<p>Don&#8217;t you love the feedback you get? Dead silence.</p>

<h3>Displaying Data</h3>

<p>Let&#8217;s see if our table actually has the data we put in.</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>sqlite> SELECT * FROM fruits;</span><span class='line output'>1|apples|6</span><span class='line output'>2|oranges|12</span><span class='line output'>3|bananas|18</span></code></pre></td></tr></table></div></div>
        </div>

<p>Hey, it&#8217;s data! We use the <code>SELECT</code> command to find rows in the table. Specifically, here we said <code>SELECT *</code> which means &quot;find all the data/columns&quot;. Then <code>FROM fruits</code> means to look in the table named <code>fruits</code>.</p>

<h4>Better Formatted Output</h4>

<p>In SQLite there&#8217;s a custom feature to format the output a bit more nicely. Try this:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>sqlite> .mode column</span><span class='line output'>sqlite> .header on</span><span class='line output'>sqlite> SELECT * FROM fruits;</span><span class='line output'>id          name        quantity</span><span class='line output'>----------  ----------  ----------</span><span class='line output'>1           apples      6</span><span class='line output'>2           oranges     12</span><span class='line output'>3           bananas     18</span></code></pre></td></tr></table></div></div>
        </div>

<p>Now we can see that our three fruits are in there, the quantites are set, and the IDs were automatically incremented.</p>

<h3>Scoping Data</h3>

<p>When you have a very small dataset, it&#8217;s possible to just print out the whole table to find what you&#8217;re looking for. But as the data grows that becomes impossible.</p>

<p>Let&#8217;s look at how you can scope down your <code>SELECT</code> queries using <code>WHERE</code>:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>sqlite> SELECT * FROM fruits WHERE name='apples';</span><span class='line output'>id          name        quantity</span><span class='line output'>----------  ----------  ----------</span><span class='line output'>1           apples      6</span><span class='line output'>sqlite> SELECT * FROM fruits WHERE quantity=18;</span><span class='line output'>id          name        quantity</span><span class='line output'>----------  ----------  ----------</span><span class='line output'>3           bananas     18</span></code></pre></td></tr></table></div></div>
        </div>

<p>The <code>WHERE</code> limits the returned rows to only those with the specified attribute matching.</p>

<h3>Calculating Data</h3>

<p>Queries aren&#8217;t limited to just matching the existing data. They can also run functions or calculations on that data and match against the results:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>sqlite> SELECT * FROM fruits WHERE LENGTH(name)=7;</span><span class='line output'>id          name        quantity</span><span class='line output'>----------  ----------  ----------</span><span class='line output'>2           oranges     12</span><span class='line output'>3           bananas     18</span></code></pre></td></tr></table></div></div>
        </div>

<p>The <code>LENGTH</code> function returns the number of characters in a string. Both <code>oranges</code> and <code>bananas</code> have 7 characters, so those rows are displayed here.</p>

<h3>Limited Selection</h3>

<p>Imagine that our table has many more columns of data, like a timestamp of when the fruit was last stocked, timestamp of the last sale, country of origin, etc.</p>

<p>Many times when we query a table we only care about a subset of the row&#8217;s data. Say we only want to find the <code>name</code> of the fruit with <code>id</code> of <code>3</code>:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>sqlite> SELECT name FROM fruits WHERE id=3;</span><span class='line output'>name</span><span class='line output'>----------</span><span class='line output'>bananas</span></code></pre></td></tr></table></div></div>
        </div>

<p>We get back only the column we asked for, <code>name</code>, as opposed to all the columns when we used <code>*</code> before.</p>

<h3>Removing Rows</h3>

<p>Removing rows works just like <code>SELECT</code> but with the instruction <code>DELETE</code>:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>sqlite> DELETE FROM fruits WHERE name='oranges';</span><span class='line output'>sqlite> SELECT * FROM fruits;</span><span class='line output'>id          name        quantity</span><span class='line output'>----------  ----------  ----------</span><span class='line output'>1           apples      6</span><span class='line output'>3           bananas     18</span></code></pre></td></tr></table></div></div>
        </div>

<p>The <code>DELETE</code> instruction will delete all matching rows and there&#8217;s no &quot;undo&quot;. If your <code>WHERE</code> clause has a typo, mistake, or doesn&#8217;t exist you could cause havoc on the data.</p>

<h3>Auto-Increment Keys</h3>

<p>And note what happens when we now insert a new fruit:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>sqlite> INSERT INTO fruits(name, quantity) VALUES ('grapes', 128);</span><span class='line output'>sqlite> SELECT * FROM fruits;</span><span class='line output'>id          name        quantity</span><span class='line output'>----------  ----------  ----------</span><span class='line output'>1           apples      6</span><span class='line output'>3           bananas     18</span><span class='line output'>4           grapes      128</span></code></pre></td></tr></table></div></div>
        </div>

<p>The IDs go <code>1</code>, <code>3</code>, <code>4</code>. The ID <code>2</code>, formerly used by the oranges, will not be reused.</p>

<h3>Updating Rows</h3>

<p>We can change data of existing rows using <code>UPDATE</code>:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>sqlite> UPDATE fruits SET quantity=17 WHERE name='bananas';</span><span class='line output'>sqlite> SELECT * FROM fruits;</span><span class='line output'>id          name        quantity</span><span class='line output'>----------  ----------  ----------</span><span class='line output'>1           apples      6</span><span class='line output'>3           bananas     17</span><span class='line output'>4           grapes      128</span></code></pre></td></tr></table></div></div>
        </div>

<h3>Adding Columns to the Table</h3>

<p>As you develop an application you&#8217;ll find that your tables need more and more columns. We can add columns to an existing table:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>sqlite> ALTER TABLE fruits ADD COLUMN country_of_origin VARCHAR(127);</span><span class='line output'>sqlite> SELECT * FROM fruits;</span><span class='line output'>id          name        quantity    country_of_origin</span><span class='line output'>----------  ----------  ----------  -----------------</span><span class='line output'>1           apples      6</span><span class='line output'>3           bananas     17</span><span class='line output'>4           grapes      128</span></code></pre></td></tr></table></div></div>
        </div>

<p>Then maybe we want to set them all to Mexico:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>sqlite> UPDATE fruits SET country_of_origin='Mexico';</span><span class='line output'>sqlite> SELECT * FROM fruits;</span><span class='line output'>id          name        quantity    country_of_origin</span><span class='line output'>----------  ----------  ----------  -----------------</span><span class='line output'>1           apples      6           Mexico</span><span class='line output'>3           bananas     17          Mexico</span><span class='line output'>4           grapes      128         Mexico</span></code></pre></td></tr></table></div></div>
        </div>

<h3>Ordering</h3>

<p>Be default data will be output in the order it was inserted, but you can&#8217;t count on that. If order matters to you, you need to add an <code>ORDER BY</code> clause:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>sqlite> SELECT * FROM fruits ORDER BY name;</span><span class='line output'>id          name        quantity    country_of_origin</span><span class='line output'>----------  ----------  ----------  -----------------</span><span class='line output'>1           apples      6           Mexico</span><span class='line output'>3           bananas     17          Mexico</span><span class='line output'>4           grapes      128         Mexico</span></code></pre></td></tr></table></div></div>
        </div>

<p>See! The order is totally diff&#8230;derp. We inserted them in alphabetical order. Let&#8217;s display them in <em>reverse</em> alphabetical order:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>sqlite> SELECT * from fruits ORDER BY name DESC;</span><span class='line output'>id          name        quantity    country_of_origin</span><span class='line output'>----------  ----------  ----------  -----------------</span><span class='line output'>4           grapes      128         Mexico</span><span class='line output'>3           bananas     17          Mexico</span><span class='line output'>1           apples      6           Mexico</span></code></pre></td></tr></table></div></div>
        </div>

<p>Adding <code>DESC</code> means &quot;descending&quot;. Ordering defaults to <code>ASC</code> or &quot;ascending&quot;. So using <code>DESC</code> flips the normal order &#8211; here returning our fruits in reverse alphabetical order by name.</p>

<h3>Relationships</h3>

<p>Relationships are where SQL starts to get both very powerful and tricky. Let&#8217;s create a second table that records each fruit sale at our store:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<br></pre></td><td class='code'><pre><code><span class='line output'>sqlite> CREATE TABLE sales(id INTEGER PRIMARY KEY AUTOINCREMENT, fruit_id INTEGER, created_at DATETIME);</span></code></pre></td></tr></table></div></div>
        </div>

<p>This table should <em>not</em> hold the name of the fruit, it&#8217;s current quantity, etc. Instead, it holds a reference to the fruit in the <code>fruits</code> table. This reference is held in the column <code>fruit_id</code> and is the numeric <code>id</code> from the <code>fruits</code> table for the associated row.</p>

<p>This is called a <strong>foreign key</strong>.</p>

<h4>Insert Sales Data</h4>

<p>We can then insert a bit of sales data:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>sqlite> INSERT INTO sales(fruit_id, created_at) VALUES(1, CURRENT_TIMESTAMP);</span><span class='line output'>sqlite> INSERT INTO sales(fruit_id, created_at) VALUES(3, CURRENT_TIMESTAMP);</span><span class='line output'>sqlite> INSERT INTO sales(fruit_id, created_at) VALUES(1, CURRENT_TIMESTAMP);</span><span class='line output'>sqlite> SELECT * FROM sales;</span><span class='line output'>id          fruit_id    created_at</span><span class='line output'>----------  ----------  -------------------</span><span class='line output'>1           1           2013-02-27 14:33:58</span><span class='line output'>2           3           2013-02-27 14:36:08</span><span class='line output'>3           1           2013-02-27 14:36:13</span></code></pre></td></tr></table></div></div>
        </div>

<h4>Joining Tables</h4>

<p>Let&#8217;s say we want a summary of the fruit sales we can send to our boss. Explaining to him that &quot;<code>fruit_id</code> of <code>1</code> means <code>apples</code>&quot; won&#8217;t go over well. We want to combine the data from the <code>fruits</code> table with that from the <code>sales</code> table:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<br><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>sqlite> SELECT fruits.name, sales.created_at FROM fruits INNER JOIN sales ON fruits.id=sales.fruit_id;</span><span class='line output'>name        created_at</span><span class='line output'>----------  -------------------</span><span class='line output'>apples      2013-02-27 14:33:58</span><span class='line output'>bananas     2013-02-27 14:36:08</span><span class='line output'>apples      2013-02-27 14:36:13</span></code></pre></td></tr></table></div></div>
        </div>

<p>We want to find (<code>SELECT</code>) the field <code>name</code> from the <code>fruits</code> table along with the <code>created_at</code> from the <code>sales</code> table, connecting them where the <code>id</code> in <code>fruits</code> is equal to the <code>fruit_id</code> in sales.</p>

<p>In effect, a <code>JOIN</code> is like creating a new table composed of two of more other tables. The data is aligned/connected based on the <code>ON</code> criteria.</p>

<p>Note that our output has three rows because there were three sales. The name <code>apples</code> matched to two different sales, so it appears twice.</p>

<h3>Three-Way Relationships</h3>

<p>Let&#8217;s create customers and add them to the sales:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<br><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>sqlite> CREATE TABLE customers(id INTEGER PRIMARY KEY AUTOINCREMENT, name VARCHAR(63));</span><span class='line output'>sqlite> INSERT INTO customers(name) VALUES ('Jeff');</span><span class='line output'>sqlite> INSERT INTO customers(name) VALUES ('Violet');</span><span class='line output'>sqlite> INSERT INTO customers(name) VALUES ('Vincent');</span><span class='line output'>sqlite> SELECT * FROM customers;</span><span class='line output'>id          name</span><span class='line output'>----------  ----------</span><span class='line output'>1           Jeff</span><span class='line output'>2           Violet</span><span class='line output'>3           Vincent</span><span class='line output'>sqlite> ALTER TABLE sales ADD COLUMN customer_id INTEGER;</span><span class='line output'>sqlite> UPDATE sales SET customer_id=2 WHERE id=1;</span><span class='line output'>sqlite> UPDATE sales SET customer_id=2 WHERE id=3;</span><span class='line output'>sqlite> UPDATE sales SET customer_id=1 WHERE id=2;</span><span class='line output'>sqlite> SELECT * FROM sales;</span><span class='line output'>id          fruit_id    created_at           customer_id</span><span class='line output'>----------  ----------  -------------------  -----------</span><span class='line output'>1           1           2013-02-27 14:33:58  2</span><span class='line output'>2           3           2013-02-27 14:36:08  1</span><span class='line output'>3           1           2013-02-27 14:36:13  2</span></code></pre></td></tr></table></div></div>
        </div>

<p>Then run a join between <code>sales</code>, <code>fruits</code>, and <code>customers</code>:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<br><br><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>sqlite> SELECT customers.name, fruits.name, sales.created_at FROM fruits INNER JOIN sales ON fruits.id=sales.fruit_id INNER JOIN customers ON sales.customer_id=customers.id;</span><span class='line output'>name        name        created_at</span><span class='line output'>----------  ----------  -------------------</span><span class='line output'>Violet      apples      2013-02-27 14:33:58</span><span class='line output'>Jeff        bananas     2013-02-27 14:36:08</span><span class='line output'>Violet      apples      2013-02-27 14:36:13</span></code></pre></td></tr></table></div></div>
        </div>

<p>And we can conclude that Violet is a fan of apples.</p>

<p>To exit out of the <code>sqlite&gt;</code> prompt type <code>.exit</code></p>

<h2>SQL Support Tools</h2>

<p>You do <em>not</em> need to use any special tool or library to run SQL and interact with databases.</p>

<p><em>However</em>, SQL queries, like all programming, are prone to error. When you make an error quering or updating your database it might just give you back unexpected results. Or it might delete all your data. You run backups, right?</p>

<p>It&#8217;s not an outlandish possibility. <a href="https://github.com/blog/744-today-s-outage">Even great programmers make mistakes with their database</a>. Just &quot;being careful&quot; probably isn&#8217;t enough.</p>

<p>In addition, SQL is not the most fun thing to write. You end up doing a lot of string manipulation to put together a query just right. There are usually quotes and escaped quotes, even in a simple query.</p>

<p>Being both somewhat difficult to build up and error prone, many programmers prefer to use intermediary libraries to <em>generate</em> SQL. If you accept that SQL is a programming language, then these libraries do a form of metaprogramming: code that writes code.</p>

<h3>Object-Relational Mappers (ORMs)</h3>

<p>In the Ruby world, we prefer to work in object. SQL is not object oriented, it&#8217;s based on relationships.</p>

<p>Most Ruby libraries for interacting with databases are &quot;Object-Relational Mappers&quot; which means they convert, on the fly, the relational data from the database into Ruby objects.</p>

<p>This means that, in your Ruby code, you usually don&#8217;t have to think about SQL. You get to stay in the context of objects with attributes and methods, not raw chunks of text like we&#8217;ve been outputting from the SQLite console.</p>

<h3>ActiveRecord</h3>

<p>In the Ruby world, ActiveRecord (often abbreviated to AR) is by far the dominant player. It&#8217;s the default database library for Rails. It is an awesomely powerful library.</p>

<p>However, it works hard to hide the database from you. If you&#8217;re just getting started with databases, it&#8217;s valuable for you to be a little closer to the SQL. An effective programmer might write code using AR, but simultaneously understand the SQL that&#8217;s being generated behind the scenes.</p>

<p>Knowing what&#8217;s happening at the SQL level can be important for security, performance, and data integrity.</p>

<h3>Sequel</h3>

<p>The Sequel library allows you to stay a bit closer to the SQL. It provides APIs which are light wrappers around the SQL instructions we&#8217;ve practiced above.</p>

<p>Hop over the our <a href="/topics/sql/sequel.html">Getting Started with Sequel</a> tutorial.</p>

<h2>References</h2>

<ul>
<li><a href="http://zetcode.com/db/sqlite/">SQLite Tutorial by Zetcode.com</a></li>
<li><a href="http://sqlzoo.net/wiki/Main_Page">SQL Interactive Tutorial</a></li>
</ul>

    
    
      <footer>
        
        
          <div class="sharing">
  
  
</div>

        
      </footer>
    
  </article>


</div>


  <span class="toggle-sidebar"></span>

<aside class="sidebar">
  <div> </div>
</aside>

<script src="/javascripts/sidebar.js" type="text/javascript"> </script>


    </div>

    <div class="footer">
  <p>
    All materials licensed <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0</a>&nbsp;
    <img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png" />
  </p>
</div>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-42709122-1', 'jumpstartlab.com');
ga('send', 'pageview');
</script>
  </div>

  


  <div class="slide-out-div">
  <a class="handle" href="#">Feedback</a>
  <h3>Have Feedback?</h3>
  <p>Did you find an error? Something confusing? We'd love your help:</p>
  <ul>
    <li><a href="#" id="edit_source">Edit the source code of this page directly on GitHub</a></li>
    <li><a href="https://github.com/JumpstartLab/curriculum/issues">Create a new issue on the project's GitHub page</a></li>
  </ul>
  <p>Thanks!</p>
</div>

<script>
  $(function(){
    var pathname = window.location.pathname.replace( ".html", ".markdown" );
    var github_url = "https://github.com/JumpstartLab/curriculum/blob/master/source" + pathname;
    $("a#edit_source").attr('href', github_url);
  });
</script>

</body>
</html>
