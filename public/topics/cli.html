
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>DIY CLI - Jumpstart Lab Curriculum</title>
  <meta name="author" content="Jumpstart Lab">

  
  <meta name="description" content="DIY CLI                              Let&#8217;s practice writing a CLI.Goal SettingBy the end of this tutorial you &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://tutorials.jumpstartlab.com/topics/cli.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection, print" rel="stylesheet" type="text/css">

  <link href="/atom.xml" rel="alternate" title="Jumpstart Lab Curriculum" type="application/atom+xml">

  <!-- TAB SLIDE OUT -->
  <script src="/javascripts/jquery-1.3.2.min.js" type="text/javascript"></script>
  <script src="/javascripts/jquery.tabSlideOut.v1.3.js"></script>

  <!-- SEARCH -->
  <script src="/search.js"></script>

  <script type="text/javascript">
    $(function(){
      $('.slide-out-div').tabSlideOut({
        tabHandle: '.handle',                     //class of the element that will become your tab
        pathToTabImage: '/images/feedback_tabv2.png', //path to the image for the tab //Optionally can be set using css
        imageHeight: '130px',                     //height of tab image           //Optionally can be set using css
        imageWidth: '36px',                       //width of tab image            //Optionally can be set using css
        tabLocation: 'left',                      //side of screen where tab lives, top, right, bottom, or left
        speed: 300,                               //speed of animation
        action: 'click',                          //options: 'click' or 'hover', action to trigger animation
        topPos: '200px',                          //position from the top/ use if tabLocation is left or right
        leftPos: '20px',                          //position from left/ use if tabLocation is bottom or top
        fixedPosition: true                      //options: true makes it stick(fixed position) on scroll
        });
      });
  </script>

  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

</head>

<body  >
  <header role="banner">
    <hgroup>
  <h1>Jumpstart Lab Curriculum</h1>
  
</hgroup>

  </header>

  <nav role="navigation">
    <ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:tutorials.jumpstartlab.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>

<ul class="main-navigation">
  <li><a href="/">Curriculum Index</a></li>
  <li><div id="search">
  <form>
    <input type="text" id="st-search-input" class="st-search-input" />
  </form>
</div>
</li>
</ul>
  </nav>

  <div id="main">
    <div id="content">
      <div>
  <article role="article">
    
    
      <header>
        <h1 class="entry-title">
          DIY CLI
        </h1>
        
      </header>
    
    <p>Let&#8217;s practice writing a CLI.</p>

<h2>Goal Setting</h2>

<p>By the end of this tutorial you should:</p>

<ul>
<li>understand what a CLI is and have some ideas of why/when you&#8217;d build one</li>
<li>know how to use Ruby to interact with / manipulate standard UNIX tools</li>
<li>be able to test a CLI using Aruba</li>
</ul>

<h3>Plan of Attack</h3>

<p>To develop those proficiencies we will:</p>

<ul>
<li>Write a bash script</li>
<li>Write a ruby script</li>
<li>Manipulate PATH</li>
<li>Make files executable</li>
<li>Use automated tests to verify functionality of scripts</li>
</ul>

<h2>What is a CLI?</h2>

<p>A CLI (command line interface) is a text based interface to a computer operating system or application. You are working with a CLI when you use your terminal.</p>

<p>In contrast, most interactions for standard computer users are completed with a GUI (pronounced gooey) Graphical User Interface. Some examples would be using iMessage or Photoshop. While the graphical user interface is very helpful for visualizing what&#8217;s going on, the command line is a very powerful tool.</p>

<p>With Ruby and bash scripting, many daily activities can be automated. Getting comfortable in the terminal will help you as a developer.</p>

<h2>Hello World</h2>

<p>Our first step will be to create a directory for this tutorial, and within it, a <code>bin</code> directory for storing our executable scripts.</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>mkdir diy-cli</span><span class='line output'>cd diy-cli</span><span class='line output'>mkdir bin</span></code></pre></td></tr></table></div></div>
        </div>

<h3>In Ruby</h3>

<p>Create a file named <code>hello_ruby.txt</code> in the <code>bin</code> directory with the following
code in it:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">puts</span> <span class="s2">&quot;Hello, World!&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>Run the script in your terminal with the <code>ruby</code> command:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>ruby bin/hello_ruby.txt</span><span class='line output'>Hello, World!</span></code></pre></td></tr></table></div></div>
        </div>

<h3>In Bash</h3>

<p>Create another file in the <code>bin</code> directory named <code>hello_bash.txt</code> with the
following code in it:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">echo</span> <span class="s2">&quot;Hello, World!&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>Run it in your terminal with the <code>bash</code> command:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>bash bin/hello_bash.txt</span><span class='line output'>Hello, World!</span></code></pre></td></tr></table></div></div>
        </div>

<h3>The Right Tool for the Job</h3>

<p>Try running the Bash program with <code>ruby</code>:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>ruby bin/hello_bash.txt</span><span class='line output'>hello_bash.txt:1:in <main>: undefined method echo for main:Object (NoMethodError)</span></code></pre></td></tr></table></div></div>
        </div>

<p>Now try running the Ruby program with <code>bash</code>:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>bash hello_ruby.txt</span><span class='line output'>hello_ruby.txt: line 1: puts: command not found</span></code></pre></td></tr></table></div></div>
        </div>

<p>It doesn&#8217;t work. <code>bash</code> doesn&#8217;t know how to interpret Ruby code, and <code>ruby</code>
code doesn&#8217;t know how to interpret bash code.</p>

<h3>File Extensions</h3>

<p>It&#8217;s common to make the file extension reflect which programming language a file is written in. For ruby, the commonly accepted extension is <code>.rb</code>. Changing the file extension doesn&#8217;t change anything about the content of the file, it&#8217;s still just plain text.</p>

<h4>Rename to <code>hello.rb</code></h4>

<p>Rename the Ruby file to <code>hello.rb</code>:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>mv bin/hello_ruby.txt bin/hello.rb</span></code></pre></td></tr></table></div></div>
        </div>

<p>You can check that your change was successful by typing <code>ls</code> in the terminal
to see all the files your directory. <code>ls</code> is short for <code>list</code>, which is
shorthand for <em>computer, please list the files in the current directory</em>.</p>

<p>Now, to run the Ruby file you would say:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>ruby bin/hello.rb</span></code></pre></td></tr></table></div></div>
        </div>

<h4>Rename to <code>hello.sh</code></h4>

<p>The commonly accepted extension for Bash is <code>sh</code>. Rename the Bash file to <code>hello.sh</code>:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>mv bin/hello_bash.txt bin/hello.sh</span></code></pre></td></tr></table></div></div>
        </div>

<p>Now run the Bash program with:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>bash bin/hello.sh</span></code></pre></td></tr></table></div></div>
        </div>

<h2>Command-Line Commands</h2>

<p>Your UNIX operating system comes with many utilities available to you out of the box. For example, the
<code>date</code> command:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>date</span><span class='line output'>Mon Feb 17 09:24:03 MST 2014</span></code></pre></td></tr></table></div></div>
        </div>

<p>Or the <code>cal</code> command which shows you the current calendar month:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>cal</span><span class='line output'>February 2014</span><span class='line output'>Su Mo Tu We Th Fr Sa</span><span class='line output'>1</span><span class='line output'>2  3  4  5  6  7  8</span><span class='line output'>9 10 11 12 13 14 15</span><span class='line output'>16 17 18 19 20 21 22</span><span class='line output'>23 24 25 26 27 28</span></code></pre></td></tr></table></div></div>
        </div>

<h3>Options &amp; Parameters</h3>

<p>Many commands take options and additional parameters.</p>

<p>For example, if you want to see a particular month in the current year, tell <code>cal</code> which month by adding the <code>-m</code> flag:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>cal -m June</span><span class='line output'>June 2014</span><span class='line output'>Su Mo Tu We Th Fr Sa</span><span class='line output'>1  2  3  4  5  6  7</span><span class='line output'>8  9 10 11 12 13 14</span><span class='line output'>15 16 17 18 19 20 21</span><span class='line output'>22 23 24 25 26 27 28</span><span class='line output'>29 30</span></code></pre></td></tr></table></div></div>
        </div>

<p>You can get a full year&#8217;s calendar by specifying the year. For example: <code>cal 2014</code>.</p>

<p>In the same way, when you run a Ruby program with <code>ruby bin/hello.rb</code> you are using the <code>ruby</code> command with <code>bin/hello.rb</code> as the argument.</p>

<h2>Custom Scripts</h2>

<p>Let&#8217;s say we want to run our <code>hello</code> script from any folder without specifying the full path. Let&#8217;s show that it doesn&#8217;t work, try this:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>$</span>
<span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>cd ..</span><span class='line command'>hello</span><span class='line command'>cd</span></code></pre></td></tr></table></div></div>
        </div>

<p>Instead of having to specify which program to execute our script with, and where it is, it would be nice to be able to go anywhere on our file system and
just say <code>hello</code>, and have it run our <code>hello.sh</code> script using <code>bash</code>. Or perhaps it would run our <code>hello.rb</code> script using <code>ruby</code>, since the result is
the same, it doesn&#8217;t matter which language the script is in.</p>

<p><strong>There are two parts to this:</strong></p>

<p><strong>First</strong>, we need to make it possible to run the command without saying which
program to use.</p>

<p><strong>Second</strong>, we need make it so the computer can find the script without typing out the full path.</p>

<p>To be able to make sense of this, we need to take a detour into the subject of
file permissions.</p>

<h3>File Permissions</h3>

<p>There are three types of permissions for a file:</p>

<ul>
<li><strong>read</strong> (<code>r</code>) - you are allowed read the file.</li>
<li><strong>write</strong> (<code>w</code>) - you are allowed to change the file.</li>
<li><strong>execute</strong> (<code>x</code>) - you are allowed to run the program defined in the file.</li>
</ul>

<p>We&#8217;ll mess around with this a bit first, then explain.</p>

<h4>Create the File</h4>

<p>Create a file called <code>haha.txt</code>, and stick some text in it, for example
<em>Wow. That was very funny.</em>.</p>

<p>Get the longhand listing for the current directory:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>ls -l .</span></code></pre></td></tr></table></div></div>
        </div>

<p>We used the <code>ls</code> command earlier to see a list of all of the files in the
directory. The <code>ls</code> command has an option <code>-l</code> (for <code>long</code>) which will display
the file permissions.</p>

<p>Let&#8217;s just look at the first part, which is the permissions bit pattern.</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>-rw-r--r--</span></code></pre></td></tr></table></div></div>
        </div>

<p>The very first thing that appears is <code>-</code> for the file. If this had been a directory, it would have had a <code>d</code> first.</p>

<p>Next there are 9 bits that can be turned on and off. The first three are for
the user, the next three are for the group, and the final three are for
<code>other</code> (in other words: &quot;everyone else&quot;).</p>

<p>For the moment, let&#8217;s ignore the group and other permissions and just focus on
the user&#8217;s permissions in the <code>haha.txt</code> file.</p>

<p>In fact, let&#8217;s change the permissions so that group/other don&#8217;t have access at all.</p>

<h4>Changing Permissions</h4>

<p>Permissions are historically called modes, and the command we use to change them is called <code>chmod</code>, for <em>change mode</em>.</p>

<p>As a reminder, the current permissions on the file are:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>-rw-r--r--</span></code></pre></td></tr></table></div></div>
        </div>

<p>Run the following command:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>chmod 600 haha.txt</span></code></pre></td></tr></table></div></div>
        </div>

<p>This sets the permissions to</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>-rw-------</span></code></pre></td></tr></table></div></div>
        </div>

<p>You can open the file in your text editor, and change the text.</p>

<p>You can also use the command <code>cat</code> to read the contents of the file into your
terminal window:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>cat haha.txt</span><span class='line output'>Wow. That was very funny.</span></code></pre></td></tr></table></div></div>
        </div>

<p>Another way of editing the file is to append text to it:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>echo "I laughed out loud." >> haha.txt</span></code></pre></td></tr></table></div></div>
        </div>

<p>Then look at the contents again:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>cat haha.txt</span><span class='line output'>Wow. That was very funny.</span><span class='line output'>I laughed out loud.</span></code></pre></td></tr></table></div></div>
        </div>

<p>Now, let&#8217;s make the permissions more restrictive by changing the permissions
to 400:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>chmod 400 haha.txt</span></code></pre></td></tr></table></div></div>
        </div>

<p>Then look at the permissions again with <code>ls -l</code>:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>-r--------</span></code></pre></td></tr></table></div></div>
        </div>

<p>This is a read only file. You can open it in your text editor or read it with
the <code>cat</code> command:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>cat haha.txt</span><span class='line output'>Wow. That was very funny.</span><span class='line output'>I laughed out loud.</span></code></pre></td></tr></table></div></div>
        </div>

<p>You can&#8217;t change it, though:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>echo "It totally made my day." >> haha.txt</span><span class='line output'>-bash: haha.txt: Permission denied</span></code></pre></td></tr></table></div></div>
        </div>

<p>Now change the permissions to 200:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>chmod 200 haha.txt</span></code></pre></td></tr></table></div></div>
        </div>

<p>The bit pattern now looks like this:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>--w-------</span></code></pre></td></tr></table></div></div>
        </div>

<p>We can now write to the file, but not read it.</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>cat haha.txt</span><span class='line output'>cat: haha.txt: Permission denied</span></code></pre></td></tr></table></div></div>
        </div>

<p>But we don&#8217;t get an error message when we try to append more text to the file:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>echo "It totally made my day." >> haha.txt</span></code></pre></td></tr></table></div></div>
        </div>

<p>So&#8230; how can we know if it worked?</p>

<p>Well, we could change the permissions again so that we can read it, or we can
ask for god powers using <code>sudo</code>:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>sudo cat haha.txt</span></code></pre></td></tr></table></div></div>
        </div>

<p>It will ask you for your password, and then output the text.</p>

<p>Using <code>sudo</code> in this context allows you to act as the &#8216;superuser&#8217; or &#8216;root&#8217;. It is a very powerful command and should be used sparingly.</p>

<hr>

<h3>Optional Side Step!</h3>

<h4>Where did 600, 400, and 200 come from?</h4>

<p>The way to come up with the magic number that will set the correct permissions
is to create a binary number using the bit pattern, and then turn that into a base 8 number. Every hyphen becomes a <code>0</code>, and for every letter becomes a <code>1</code>.</p>

<p>Ignore the first spot, since that&#8217;s not part of the permissions bit
pattern.</p>

<p>Here&#8217;s the original bit pattern before we started using <code>chmod</code> to change it:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>-rw-r--r--</span><span class='line output'>110100100</span></code></pre></td></tr></table></div></div>
        </div>

<p>In IRB you can translate a binary into an octal like this:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>irb</span><span class='line output'>irb:001> 0b110100100.to_s(8)</span><span class='line output'>=> 644</span></code></pre></td></tr></table></div></div>
        </div>

<p>So running <code>chmod 644 haha.txt</code> will set the permissions back to what they
were.</p>

<hr>

<h3>What about <code>x</code> for Executable?</h3>

<p>So putting this all together:</p>

<p>It seems like perhaps the <code>hello.rb</code> and <code>hello.sh</code> scripts would need to have <code>execute</code> turned on in order to run.</p>

<p><strong>Change the permissions of <code>hello.rb</code> to 400.</strong></p>

<p>This will give the file the <code>read</code> ability, but not <code>write</code> or <code>execute</code>.</p>

<p><strong>Then run the script.</strong></p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>ruby hello.rb</span><span class='line output'>Hello, World!</span></code></pre></td></tr></table></div></div>
        </div>

<p>It works.</p>

<p><strong>Now change the permissions to 200</strong>, which is <code>write-only</code>, <strong>and run the script again</strong>.</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>ruby bin/hello.rb</span><span class='line output'>ruby: Permission denied --bin/hello.rb (LoadError)</span></code></pre></td></tr></table></div></div>
        </div>

<p>It doesn&#8217;t work with <code>write only</code> permission.</p>

<p>The program that is being executed in this case is not actually <code>hello.rb</code>, but actually <code>ruby</code> itself.
<code>hello.rb</code> is just an argument to the <code>ruby</code> program, and as long as <code>ruby</code> is
allowed to read it, it can run the program.</p>

<h4>So, how and why do we use <code>x</code> permission, you ask?</h4>

<p>Well, good question.</p>

<p>Let&#8217;s set the permissions back to read-write (without execute):</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>chmod 600 hello.rb</span></code></pre></td></tr></table></div></div>
        </div>

<p>The permissions have changed accordingly:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>ls -l hello.rb</span><span class='line output'>-rw-------  1 kytrinyx  staff  21 Feb 18 09:40 hello.rb</span></code></pre></td></tr></table></div></div>
        </div>

<p>Now, let&#8217;s try running the script directly, rather than using the <code>ruby</code>
program to run it:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>cd ..</span><span class='line command'>bin/hello.rb</span><span class='line output'>-bash: bin/hello.rb: Permission denied</span></code></pre></td></tr></table></div></div>
        </div>

<p>It looks like <code>bash</code> is trying to execute it, but isn&#8217;t allowed to.</p>

<p>Change the permissions again, this time to 700:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>chmod 700 bin/hello.rb</span></code></pre></td></tr></table></div></div>
        </div>

<p>Check the permissions:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>ls -l bin/hello.rb</span><span class='line output'>-rwx------  1 kytrinyx  staff  21 Feb 18 09:40 bin/hello.rb</span></code></pre></td></tr></table></div></div>
        </div>

<p>Now let&#8217;s try to run it directly again:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>bin/hello.rb</span><span class='line output'>bin/hello.rb: line 1: puts: command not found</span></code></pre></td></tr></table></div></div>
        </div>

<p>That&#8217;s a familiar error message. Bash is trying to run the program, but it&#8217;s
ruby code. We need to find a way to tell the computer to use <code>ruby</code>, not
<code>bash</code>, to run the script.</p>

<h3>Introducing the Shebang</h3>

<p>We can embed information into the file itself so that it knows which program to use
to be executed.</p>

<p>Edit the <code>hello.rb</code> file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">#!/usr/bin/env ruby</span>
</span><span class='line'>
</span><span class='line'><span class="nb">puts</span> <span class="s2">&quot;Hello, world!&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>The first line starts with a hash (<code>#</code>) and a bang (<code>!</code>). This is pronounced <em>shebang</em>.</p>

<p>Next we include the path to the program that should be used to run
the script. In this case we want whichever <code>ruby</code> the current environment has
defined as the <code>ruby</code> program.</p>

<p>Now, try running the program again from the main <code>diy-cli</code> directory:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>bin/hello.rb</span><span class='line output'>Hello, World!</span></code></pre></td></tr></table></div></div>
        </div>

<p>That fixes it.</p>

<p>It&#8217;s good form to tell to tell the computer where to find the program to run a script with.</p>

<p>Now let&#8217;s do the same thing to our bash script &#8216;hello.sh` and change that file to be executable (reminder, 700 is the code that can turn executable on).</p>

<p>If you’re not sure where <code>bash</code> lives, you can use <code>which</code> to find out:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>which bash</span><span class='line output'>/bin/bash</span></code></pre></td></tr></table></div></div>
        </div>

<p>Add <code>#!/bin/bash</code> to the top of the script <code>hello.sh</code> script.</p>

<h2>PATH</h2>

<p>Now that we&#8217;ve set the executable bit and used shebang to identify the programs
that should be used to run the files, we can run them by just calling the path to
the file.</p>

<p><strong>That has limitations.</strong></p>

<p>First of all, you need to remember the full path, and that&#8217;s a pain.</p>

<p>Second of all, if you happen to be in the same directory as the script, you
still have to specify a path.</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>$</span>
<span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>bin/hello.sh</span><span class='line output'>Hello, World!</span><span class='line command'>cd bin</span><span class='line command'>hello.sh</span><span class='line output'>-bash: hello.sh: command not found</span></code></pre></td></tr></table></div></div>
        </div>

<p>This is because the computer doesn&#8217;t look in the current directory for
scripts. If you specify that it should look in the current directory (<code>.</code>)
then it will:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>./hello.sh</span><span class='line output'>Hello, World!</span></code></pre></td></tr></table></div></div>
        </div>

<p>So, if it doesn&#8217;t look in the current directory, where does it look?</p>

<p>It looks in something called <code>PATH</code>, which is an environment variable.</p>

<p>You can see the value of this on your system by running:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>echo $PATH</span></code></pre></td></tr></table></div></div>
        </div>

<p>Right now, mine is a complete mess, with a bunch of duplicates:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/Users/kytrinyx/.gem/ruby/2.1.0/bin:/Users/kytrinyx/.rubies/ruby-2.1.0/lib/ruby/gems/2.1.0/bin:/Users/kytrinyx/.rubies/ruby-2.1.0/bin:/Users/kytrinyx/bin:/usr/local/bin:/usr/bin:/usr/local/share/npm/bin:/usr/local/go/bin:/usr/local/bin:/Users/kytrinyx/code/go/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/go/bin:/usr/texbin:/Users/kytrinyx/bin:/usr/local/share/npm/bin:/Users/kytrinyx/code/go/bin</span></code></pre></td></tr></table></div></figure>

<p>Each part of the path is separated by a colon (<code>:</code>).
We&#8217;ll simplify and pretend that your path looks like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/usr/bin:/usr/local/bin:/bin</span></code></pre></td></tr></table></div></figure>

<p>In this case there are three directories in your path:</p>

<ul>
<li><code>/usr/bin</code> (the <code>bin</code> directory that lives in <code>unix system resources</code>)</li>
<li><code>/usr/local/bin</code> (a folder that homebrew typically uses when installing things)</li>
<li><code>/bin</code> (the top-level <code>bin</code> directory)</li>
</ul>

<p>If you type <code>zomg</code> in your terminal window, your computer will go to the first
place in your path, and look for an executable file there named <code>zomg</code>.</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>zomg</span></code></pre></td></tr></table></div></div>
        </div>

<p>So first it looks in:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/usr/bin/zomg</span></code></pre></td></tr></table></div></figure>

<p>Then, since it doesn&#8217;t find it there, it goes to the next place, and tries:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/usr/local/bin/zomg</span></code></pre></td></tr></table></div></figure>

<p>Still no luck. So it tries:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/bin/zomg</span></code></pre></td></tr></table></div></figure>

<p>Since this doesn&#8217;t exist, and the computer has no further places to look, it
gives up and complains:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-bash: zomg: command not found</span></code></pre></td></tr></table></div></figure>

<p>If we want the computer to look in more places, we can expand the path.</p>

<p>For now, figure out what the path to your <code>diy-cli/bin</code> directory is.</p>

<p>You can do so by using the <code>pwd</code> bash command in the terminal:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>pwd</span><span class='line output'>/Users/kytrinyx/code/tmp/diy-cli/bin</span></code></pre></td></tr></table></div></div>
        </div>

<p>To add this path to the PATH, I can export the directions:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>export PATH=/Users/kytrinyx/code/tmp/diy-cli/bin:$PATH</span></code></pre></td></tr></table></div></div>
        </div>

<p>Check your path again:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>echo $PATH</span></code></pre></td></tr></table></div></div>
        </div>

<p>You should see all the old stuff, and at the very front, you should see the
path where your <code>hello.sh</code> and <code>hello.rb</code> files live.</p>

<p>The <code>$PATH</code> value has only been updated for that particular terminal window.
If you open a second terminal window and type <code>echo $PATH</code>, you will only see
the original path.</p>

<p>Back in your first window, you&#8217;re probably still standing in the <code>diy-cli/bin</code>
directory.</p>

<p>Try running the script without specifying the <code>./</code>:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>hello.rb</span></code></pre></td></tr></table></div></div>
        </div>

<p>If your path is set up correctly, you will now get <code>Hello, World!</code> rather than
<code>no such command</code>.</p>

<p>If that works, change directories to your home directory, and try again:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>cd</span><span class='line command'>hello.rb</span></code></pre></td></tr></table></div></div>
        </div>

<p>The computer knows where to find it.</p>

<p>Now try it in a different terminal window.
It should give you the
<code>command not found</code> message.</p>

<p>It&#8217;s quite common to create a <code>~/bin</code> directory that you put on your PATH
permanently, by adding this line of code to your <code>.bash_profile</code> or <code>.zshrc</code>
file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>~/bin:<span class="nv">$PATH</span>
</span></code></pre></td></tr></table></div></figure>

<h2>Adding automated tests for <code>hello.sh</code></h2>

<p><strong>Make sure you&#8217;re in your <code>diy-cli</code> directory.</strong></p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>gem install aruba</span></code></pre></td></tr></table></div></div>
        </div>

<p>The <code>aruba</code> gem adds some basic functionality to the testing framework Cucumber, so installing aruba will also install cucumber.</p>

<p>Run the <code>cucumber</code> command:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>cucumber</span></code></pre></td></tr></table></div></div>
        </div>

<p>This will give you an error message.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>No such file or directory - features. Please create a features directory to get started. (Errno::ENOENT)</span></code></pre></td></tr></table></div></figure>

<p>If you look closely, it tells you exactly what you need to do:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Please create a features directory to get started.</span></code></pre></td></tr></table></div></figure>

<p>Go ahead and do that, then run cucumber again.</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>mkdir features</span><span class='line command'>cucumber</span></code></pre></td></tr></table></div></div>
        </div>

<p>This gives the following output:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>0 scenarios
</span><span class='line'>0 steps
</span><span class='line'>0m0.000s</span></code></pre></td></tr></table></div></figure>

<p>We need a scenario to run.</p>

<p>Inside the <code>features</code> directory, create a new file, <code>hello-in-bash.feature</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Feature: Saying hello in bash
</span><span class='line'>
</span><span class='line'>Scenario: Greeting the world
</span><span class='line'>  When I run `hello.sh`
</span><span class='line'>  Then the output should contain:
</span><span class='line'>  """
</span><span class='line'>  Hello, World!
</span><span class='line'>  """</span></code></pre></td></tr></table></div></figure>

<p>This is a testing language called <code>gherkin</code> that is used with Cucumber. Each <code>Scenario</code> is a single test, and each line in the scenario is an instruction that gets translated into code. There are some default instructions that are widely recognized, but you can define your own instructions (or &quot;steps&quot;) as well.</p>

<p>Notice that we&#8217;re running <code>hello.sh</code> without specifying the full path. You don&#8217;t need to have <code>diy-cli/bin</code> on your PATH, the <code>aruba</code> gem figures out which directory you are in, and puts the <code>bin</code> path in that current directory onto the path for you.</p>

<p>Running <code>cucumber</code> now gives you a lot more output:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Feature: Saying hello in bash
</span><span class='line'>
</span><span class='line'>  Scenario: Greeting the world      # features/hello-in-bash.feature:3
</span><span class='line'>    When I run `hello.sh`           # features/hello-in-bash.feature:4
</span><span class='line'>    Then the output should contain: # features/hello-in-bash.feature:5
</span><span class='line'>    """
</span><span class='line'>    Hello, World!
</span><span class='line'>    """
</span><span class='line'>
</span><span class='line'>1 scenario (1 undefined)
</span><span class='line'>2 steps (2 undefined)
</span><span class='line'>0m0.002s
</span><span class='line'>
</span><span class='line'>You can implement step definitions for undefined steps with these snippets:
</span><span class='line'>
</span><span class='line'>When(/^I run `hello\.rb`$/) do
</span><span class='line'>  pending # express the regexp above with the code you wish you had
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>Then(/^the output should contain:$/) do |string|
</span><span class='line'>  pending # express the regexp above with the code you wish you had
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>

<p>So it is running our scenario, but it doesn&#8217;t know how to interpret the steps.</p>

<p>This is where <code>aruba</code> comes in. Aruba has defined a lot of default steps that are helpful when testing command-line clients, for example:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>When I run `some command`</span></code></pre></td></tr></table></div></figure>

<p>and</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Then the output should contain:
</span><span class='line'>"""
</span><span class='line'>some text
</span><span class='line'>"""</span></code></pre></td></tr></table></div></figure>

<p>Create a new directory <code>features/support</code>, and add an empty file to it named <code>env.rb</code>.</p>

<p>In <code>env.rb</code> add the following code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;aruba/cucumber&#39;</span>
</span></code></pre></td></tr></table></div></figure>

<p>Run <code>cucumber</code> again. This time the test should pass.</p>

<p>Let&#8217;s complicate things. It would be nice to be able to greet specific people rather than the whole world. The world should still be the default, though.</p>

<p>Add a second scenario to your hello-in-bash.feature test:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Feature: Saying hello in bash
</span><span class='line'>
</span><span class='line'>Scenario: Greeting the world
</span><span class='line'>  When I run `hello.sh`
</span><span class='line'>  Then the output should contain:
</span><span class='line'>  """
</span><span class='line'>  Hello, World!
</span><span class='line'>  """
</span><span class='line'>
</span><span class='line'>Scenario: Greeting a person
</span><span class='line'>  When I run `hello.sh Alice`
</span><span class='line'>  Then the output should contain:
</span><span class='line'>  """
</span><span class='line'>  Hello, Alice!
</span><span class='line'>  """</span></code></pre></td></tr></table></div></figure>

<p>Run <code>cucumber</code>, and the first scenario passes, as does the <code>When</code> step. The <code>Then</code> step fails, however, because we&#8217;re still getting &quot;Hello, World!&quot; rather than &quot;Hello, Alice!&quot;.</p>

<p>We need a way to get access to the things that got passed in to the script on the command line.</p>

<p>In bash, each variable gets assigned a number, which can be accessed by <code>$1</code>, <code>$2</code>, etc.</p>

<p>We could change the code to this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;Hello, $1!&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>And that would get the second scenario running, but the first one would fail.</p>

<p>We need a way to set a default value. In bash, this looks like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>
</span><span class='line'><span class="nv">WHO</span><span class="o">=</span><span class="nv">$1</span>
</span><span class='line'><span class="nv">WHO</span><span class="o">=</span><span class="k">${</span><span class="nv">WHO</span><span class="k">:-</span><span class="s2">&quot;World&quot;</span><span class="k">}</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;Hello, $WHO!&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>The first line assigns the value of <code>$1</code> into the variable <code>WHO</code>.
The second assigns the value <code>World</code> into <code>WHO</code>, but only if <code>WHO</code> is currently empty.
Finally, we use <code>$WHO</code> to access the <code>WHO</code> variable.</p>

<p>This gets the tests passing.</p>

<h2>Adding automated tests for <code>hello.rb</code></h2>

<p>Create a second file in features called <code>hello-in-ruby.feature</code>.</p>

<p>Write two scenarios, one for <code>&quot;Hello, World!&quot;</code> and one for <code>&quot;Hello, Bob!&quot;</code>.</p>

<p>In ruby you can access the arguments passed to your script using the <code>ARGV</code> constant. It&#8217;s an array, and you can get the first thing out of it using <code>ARGV.first</code>.</p>

<p>You can use <code>||</code> in ruby to use a default:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">who</span> <span class="o">=</span> <span class="no">ARGV</span><span class="o">.</span><span class="n">first</span> <span class="o">||</span> <span class="s2">&quot;World&quot;</span>
</span><span class='line'><span class="nb">puts</span> <span class="s2">&quot;Hello, </span><span class="si">#{</span><span class="n">who</span><span class="si">}</span><span class="s2">!&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>Get the tests you&#8217;ve written to pass!</p>

<h3>Expanding hello.rb</h3>

<p>Let&#8217;s make it possible to greet multiple people at once.</p>

<p>For example:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>hello.rb Alice Bob Charlie</span><span class='line output'>Hello, Alice!</span><span class='line output'>Hello, Bob!</span><span class='line output'>Hello, Charlie!</span></code></pre></td></tr></table></div></div>
        </div>

<p>Add a scenario for it in your ruby feature test:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Scenario: Greeting many people
</span><span class='line'>  When I run `hello.rb Alice Bob Charlie`
</span><span class='line'>  Then the output should contain:
</span><span class='line'>  """
</span><span class='line'>  Hello, Alice!
</span><span class='line'>  """
</span><span class='line'>  And the output should contain:
</span><span class='line'>  """
</span><span class='line'>  Hello, Bob!
</span><span class='line'>  """
</span><span class='line'>  And the output should contain:
</span><span class='line'>  """
</span><span class='line'>  Hello, Charlie!
</span><span class='line'>  """</span></code></pre></td></tr></table></div></figure>

<h4>Hints</h4>

<p>Let&#8217;s say you have an array called <code>fruits</code>.</p>

<p>You can check if it has anything in it by asking <code>fruits.empty?</code>.</p>

<p>You can add something to an array by using the <em>shovel</em> method:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">fruits</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;apple&#39;</span>
</span></code></pre></td></tr></table></div></figure>

<p>You can loop through an array using <code>each</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">fruits</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">fruit</span><span class="o">|</span>
</span><span class='line'>  <span class="n">eat</span> <span class="n">fruit</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<h3>Hello, Full Name!</h3>

<p>What would you need to do to be able to greet Alice as follows?</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Hello, Alice Smith!</span></code></pre></td></tr></table></div></figure>

<p>Hint: If all your tests are passing, you shouldn&#8217;t need to change anything in the code.</p>

<h2>Writing a slightly more complicated bash script</h2>

<p>Let&#8217;s try a more realistic scenario.</p>

<p>Get (clone) the <a href="https://github.com/JumpstartLab/ambashed">ambashed</a> repository, and change directories into it.</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line output'>git clone https://github.com/JumpstartLab/ambashed.git</span><span class='line output'>cd ambashed</span></code></pre></td></tr></table></div></div>
        </div>

<p>Install the dependencies:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>bundle install</span></code></pre></td></tr></table></div></div>
        </div>

<p>Here&#8217;s our problem. We have a directory full of text documents that have very inconsistent names: upper and lowercase letters, spaces, underscores, and hyphens.</p>

<p>We need to standardize so that we get all lowercase, and only hyphens, no underscores or spaces. Also, we don&#8217;t want multiple hyphens in a row.</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>ls -1 files/</span><span class='line output'>2013 summary of stuff.txt</span><span class='line output'>Carrot Cake.txt</span><span class='line output'>Contact List - work.txt</span><span class='line output'>contact_list   SCHOOL.txt</span><span class='line output'>rESUME Alice Smith.txt</span></code></pre></td></tr></table></div></div>
        </div>

<p>What should the script do?</p>

<p>In its simplest form, it should take the files in a given directory and clean up all the names.</p>

<p>That&#8217;s kind of scary, though. What if we accidentally get it wrong? We should probably not just rename the files in place, we need to find a way to make it so that we could delete things if they go badly, and then try again.</p>

<p>So our script should not touch existing files, it should make a copy of the file and put it in a new location.</p>

<h3>Wiring things together</h3>

<p>Start by running <code>cucumber</code>. It tells you that it&#8217;s missing the <code>features</code> directory. Go ahead and make it, and run cucumber again.</p>

<p>Now we need a test. What would a test look like?</p>

<p>Here is what we expect to happen:</p>

<p>We run the script, telling it which directory to clean up.</p>

<p>Then we list out the files in the new directory, and it should have the cleaned up files.</p>

<p>We shouldn&#8217;t operate on the given production files for the tests, because we might mess them up.</p>

<p>What&#8217;s the simplest case we could test?</p>

<p>Well, if we had a directory with a single file that already conformed to our standard, that file should end up in the new location.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Feature: Cleaning up file names
</span><span class='line'>
</span><span class='line'>  Scenario: Beautiful names are left alone
</span><span class='line'>    Given a directory named "stuff"
</span><span class='line'>    And an empty file named "stuff/a-nice-name.txt"
</span><span class='line'>    When I run `cleanup stuff`
</span><span class='line'>    And I run `ls -1 clean-stuff`
</span><span class='line'>    Then the output from "ls -1 clean-stuff" should contain "a-nice-name.txt"</span></code></pre></td></tr></table></div></figure>

<p>Run <code>cucumber</code> again, and it will tell you about a bunch of missing steps.</p>

<p>We need to require <code>aruba</code>.</p>

<p>Create a directory <code>features/support</code>, and a file <code>features/support/env.rb</code> that has the require statement for <code>aruba/cucumber</code>.</p>

<p>Now when you run the <code>cucumber</code> command it should have a couple passing steps, since aruba knows how to create directories and files.</p>

<p>It fails at the <em>When I run <code>cleanup stuff</code></em> step.</p>

<p>We need a script named <code>cleanup</code> that is executable, and lives in the <code>bin</code> directory.</p>

<p>Create an empty &#8216;cleanup&#8217; file in the <code>bin</code> directory, and change the mode to <code>700</code>.</p>

<p>That gets the cleanup step passing, but we&#8217;re stuck on listing the contents of the new directory.</p>

<p>That&#8217;s because the new directory doesn&#8217;t exist. The script has to create it before it can copy things into it.</p>

<p>Here&#8217;s what I came up with:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>
</span><span class='line'><span class="nv">source_dir</span><span class="o">=</span><span class="nv">$1</span>
</span><span class='line'><span class="nv">target_dir</span><span class="o">=</span><span class="s2">&quot;clean-$source_dir&quot;</span>
</span><span class='line'>
</span><span class='line'>mkdir <span class="nv">$target_dir</span>
</span></code></pre></td></tr></table></div></figure>

<p>That gets the next step passing. To get the final step passing we need to figure out what&#8217;s in the old directory and copy it to the new directory.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>
</span><span class='line'><span class="nv">source_dir</span><span class="o">=</span><span class="nv">$1</span>
</span><span class='line'><span class="nv">target_dir</span><span class="o">=</span><span class="s2">&quot;clean-$source_dir&quot;</span>
</span><span class='line'>
</span><span class='line'>mkdir <span class="nv">$target_dir</span>
</span><span class='line'>
</span><span class='line'><span class="k">for </span>source_file in <span class="k">$(</span>ls <span class="nv">$source_dir</span><span class="k">)</span>; <span class="k">do</span>
</span><span class='line'><span class="k">  </span><span class="nv">target_file</span><span class="o">=</span><span class="nv">$source_file</span>
</span><span class='line'>  touch <span class="s2">&quot;$target_dir/$target_file&quot;</span>
</span><span class='line'><span class="k">done</span>
</span></code></pre></td></tr></table></div></figure>

<p>For now we&#8217;re using the same filename as the new name. We need to write a test that will force us to improve that part of the script.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Scenario: Uppercase names are made lowercase
</span><span class='line'>  Given a directory named "loud"
</span><span class='line'>  And an empty file named "loud/SHOUT.txt"
</span><span class='line'>  When I run `cleanup loud`
</span><span class='line'>  And I run `ls -1 clean-loud`
</span><span class='line'>  Then the output from "ls -1 clean-loud" should contain "shout.txt"</span></code></pre></td></tr></table></div></figure>

<p>Thais fails, of course. Here&#8217;s what I came up with to make it pass:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">target_file</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$source_file</span> | tr <span class="s1">&#39;A-Z&#39;</span> <span class="s1">&#39;a-z&#39;</span><span class="k">)</span>
</span></code></pre></td></tr></table></div></figure>

<p>That puts the full script at:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>
</span><span class='line'><span class="nv">source_dir</span><span class="o">=</span><span class="nv">$1</span>
</span><span class='line'><span class="nv">target_dir</span><span class="o">=</span><span class="s2">&quot;clean-$source_dir&quot;</span>
</span><span class='line'>
</span><span class='line'>mkdir <span class="nv">$target_dir</span>
</span><span class='line'>
</span><span class='line'><span class="k">for </span>source_file in <span class="k">$(</span>ls <span class="nv">$source_dir</span><span class="k">)</span>; <span class="k">do</span>
</span><span class='line'><span class="k">  </span><span class="nv">target_file</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$source_file</span> | tr <span class="s1">&#39;A-Z&#39;</span> <span class="s1">&#39;a-z&#39;</span><span class="k">)</span>
</span><span class='line'>  touch <span class="s2">&quot;$target_dir/$target_file&quot;</span>
</span><span class='line'><span class="k">done</span>
</span></code></pre></td></tr></table></div></figure>

<p>Let&#8217;s handle underscores:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Scenario: It uses hyphens instead of underscores
</span><span class='line'>  Given a directory named "many"
</span><span class='line'>  And an empty file named "many/words_and_things.txt"
</span><span class='line'>  When I run `cleanup many`
</span><span class='line'>  And I run `ls -1 clean-many`
</span><span class='line'>  Then the output from "ls -1 clean-many" should contain "words-and-things.txt"</span></code></pre></td></tr></table></div></figure>

<p>We need a tiny bit of extra stuff in our <code>tr</code> command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">target_file</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$source_file</span> | tr <span class="s1">&#39;A-Z_&#39;</span> <span class="s1">&#39;a-z-&#39;</span><span class="k">)</span>
</span></code></pre></td></tr></table></div></figure>

<p>Looking back at our original list of filenames, we also need to handle spaces.</p>

<p>Here&#8217;s a test for a file with a space:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Scenario: It replaces spaces with hyphens
</span><span class='line'>  Given a directory named "cowboy"
</span><span class='line'>  And an empty file named "cowboy/rides a horse.txt"
</span><span class='line'>  When I run `cleanup cowboy`
</span><span class='line'>  And I run `ls -1 clean-cowboy`
</span><span class='line'>  Then the output from "ls -1 clean-cowboy" should contain "rides-a-horse.txt"</span></code></pre></td></tr></table></div></figure>

<p>This fails with the following diff:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Diff:
</span><span class='line'>@@ -1,2 +1,4 @@
</span><span class='line'>-rides-a-horse.txt
</span><span class='line'>+a
</span><span class='line'>+horse.txt
</span><span class='line'>+rides</span></code></pre></td></tr></table></div></figure>

<p>Instead of getting a single new file called <code>rides-a-horse.txt</code>, we got three files. Our code isn&#8217;t handling whitespace correctly.</p>

<p>We need a different strategy in our loop. Let&#8217;s switch to using the native globbing capability:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">for </span>source_file in <span class="nv">$source_dir</span>/*; <span class="k">do</span>
</span><span class='line'>  <span class="c"># ...</span>
</span><span class='line'><span class="k">done</span>
</span></code></pre></td></tr></table></div></figure>

<p>This makes all the scenarios fail, but the failure doesn&#8217;t really tell us why.</p>

<p>Let&#8217;s tweak our current scenario to get some more output.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Scenario: It replaces spaces with hyphens
</span><span class='line'>  Given a directory named "cowboy"
</span><span class='line'>  And an empty file named "cowboy/rides a horse.txt"
</span><span class='line'>  When I run `cleanup cowboy`
</span><span class='line'>  Then the output should contain:
</span><span class='line'>  """
</span><span class='line'>  abracadabra
</span><span class='line'>  """
</span><span class='line'>  # And I run `ls -1 clean-cowboy`
</span><span class='line'>  # Then the output from "ls -1 clean-cowboy" should contain "rides-a-horse.txt"</span></code></pre></td></tr></table></div></figure>

<p>Now we see all the error messages. In particular this should give us a hint:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>touch: clean-cowboy/cowboy/rides-a-horse.txt: No such file or directory</span></code></pre></td></tr></table></div></figure>

<p>There&#8217;s no <code>clean-cowboy/cowboy</code> directory. The globbing gives us the entire filename, including the directory, so it ends up repeated.</p>

<p>We can use the <code>basename</code> command to strip off the extra stuff:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">source_file</span><span class="o">=</span><span class="k">$(</span>basename <span class="s2">&quot;$source_file&quot;</span><span class="k">)</span>
</span></code></pre></td></tr></table></div></figure>

<p>That makes the full script:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">source_dir</span><span class="o">=</span><span class="nv">$1</span>
</span><span class='line'><span class="nv">target_dir</span><span class="o">=</span><span class="s2">&quot;clean-$source_dir&quot;</span>
</span><span class='line'>
</span><span class='line'>mkdir <span class="nv">$target_dir</span>
</span><span class='line'>
</span><span class='line'><span class="k">for </span>source_file in <span class="nv">$source_dir</span>/*; <span class="k">do</span>
</span><span class='line'><span class="k">  </span><span class="nv">source_file</span><span class="o">=</span><span class="k">$(</span>basename <span class="s2">&quot;$source_file&quot;</span><span class="k">)</span>
</span><span class='line'>  <span class="nv">target_file</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;$source_file&quot;</span> | tr <span class="s1">&#39;A-Z_ &#39;</span> <span class="s1">&#39;a-z--&#39;</span><span class="k">)</span>
</span><span class='line'>  touch <span class="s2">&quot;$target_dir/$target_file&quot;</span>
</span><span class='line'><span class="k">done</span>
</span></code></pre></td></tr></table></div></figure>

<p>This is now complaining because we&#8217;re expecting to see &quot;abracadabra&quot;, but we&#8217;re not. Let&#8217;s switch back to our real expectation and see what&#8217;s happening.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Scenario: It replaces spaces with hyphens
</span><span class='line'>  Given a directory named "cowboy"
</span><span class='line'>  And an empty file named "cowboy/rides a horse.txt"
</span><span class='line'>  When I run `cleanup cowboy`
</span><span class='line'>  And I run `ls -1 clean-cowboy`
</span><span class='line'>  Then the output from "ls -1 clean-cowboy" should contain "rides-a-horse.txt"</span></code></pre></td></tr></table></div></figure>

<p>That&#8217;s it. It passes.</p>

<p>The next case is a file with multiple spaces.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Scenario: It replaces multiple spaces with a single hyphen
</span><span class='line'>  Given a directory named "universe"
</span><span class='line'>  And an empty file named "universe/with       space.txt"
</span><span class='line'>  When I run `cleanup universe`
</span><span class='line'>  And I run `ls -1 clean-universe`
</span><span class='line'>  Then the output from "ls -1 clean-universe" should contain "with-space.txt"</span></code></pre></td></tr></table></div></figure>

<p>We need a way to edit the text. We&#8217;ll use <code>sed</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">target_file</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;$source_file&quot;</span> | tr <span class="s1">&#39;A-Z_ &#39;</span> <span class="s1">&#39;a-z--&#39;</span> | sed -e <span class="s1">&#39;s/-\{1,\}/-/g&#39;</span><span class="k">)</span>
</span></code></pre></td></tr></table></div></figure>

<p>Ok, we&#8217;ve got this working for the renaming part, but we&#8217;re not actually copying those files, we&#8217;re just making new files with the correct name.</p>

<p>Let&#8217;s make a test that forces us to copy the files.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Scenario: The file contents are preserved
</span><span class='line'>  Given a directory named "meals"
</span><span class='line'>  And a file named "meals/BREAKFAST.txt" with:
</span><span class='line'>  """
</span><span class='line'>  eggs & bacon
</span><span class='line'>  """
</span><span class='line'>  And a file named "meals/Lunch Special.txt" with:
</span><span class='line'>  """
</span><span class='line'>  fish tacos
</span><span class='line'>  """
</span><span class='line'>  When I run `cleanup meals`
</span><span class='line'>  And I run `cat clean-meals/breakfast.txt`
</span><span class='line'>  And I run `cat clean-meals/lunch-special.txt`
</span><span class='line'>  Then the output from "cat clean-meals/breakfast.txt" should contain "eggs & bacon"</span></code></pre></td></tr></table></div></figure>

<p>Make it pass:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#!/bin/bash
</span><span class='line'>
</span><span class='line'>source_dir=$1
</span><span class='line'>target_dir="clean-$source_dir"
</span><span class='line'>
</span><span class='line'>mkdir $target_dir
</span><span class='line'>
</span><span class='line'>for source_file in $source_dir/*; do
</span><span class='line'>  source_file=$(basename "$source_file")
</span><span class='line'>  target_file=$(echo "$source_file" | tr 'A-Z_ ' 'a-z--' | sed -e 's/-\{1,\}/-/g')
</span><span class='line'>  cp "$source_dir/$source_file" "$target_dir/$target_file"
</span><span class='line'>done</span></code></pre></td></tr></table></div></figure>

<h2>Implement the ambashed script in Ruby</h2>

<p>Now delete all the code from <code>bin/cleanup</code> and re-implement the tests in Ruby.</p>

<p>Hints.</p>

<p>Remember that you have to tell the computer to use Ruby to execute the script:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">#!/usr/bin/env ruby</span>
</span></code></pre></td></tr></table></div></figure>

<p>Also, recall that <code>ARGV</code> is where you&#8217;ll find the commands/options/arguments to the script. It&#8217;s an array.</p>

<p>You will need some methods on <a href="http://ruby-doc.org/core-2.0/String.html"><code>String</code></a>.</p>

<p>Also, check out <a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/pathname/rdoc/Pathname.html"><code>Pathname</code></a> and <a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/fileutils/rdoc/FileUtils.html"><code>FileUtils</code></a>.</p>

<h2>Scheduling stuff with cron</h2>

<p>Create a new directory called <code>words</code>:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>mkdir words</span></code></pre></td></tr></table></div></div>
        </div>

<p>Go to the words directory:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>cd words</span></code></pre></td></tr></table></div></div>
        </div>

<p>Inside of <code>words/</code> create a file called <code>numbers.txt</code> and add the following to it:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>one
</span><span class='line'>two
</span><span class='line'>three
</span><span class='line'>four
</span><span class='line'>five
</span><span class='line'>six
</span><span class='line'>seven
</span><span class='line'>eight
</span><span class='line'>nine
</span><span class='line'>ten
</span><span class='line'>eleven
</span><span class='line'>twelve
</span><span class='line'>thirteen
</span><span class='line'>fourteen
</span><span class='line'>fifteen</span></code></pre></td></tr></table></div></figure>

<h3>reading without opening a file</h3>

<p>There are several commands that can let you see the contents of a file, even without opening it. These commands just dump out the contents of the file into your terminal window.</p>

<p>Try the following in your terminal:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>cat numbers.txt</span></code></pre></td></tr></table></div></div>
        </div>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>head numbers.txt</span></code></pre></td></tr></table></div></div>
        </div>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>tail numbers.txt</span></code></pre></td></tr></table></div></div>
        </div>

<p>How are they different?</p>

<p>Now try adding the <code>-n</code> option to each command:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>cat -n numbers.txt</span></code></pre></td></tr></table></div></div>
        </div>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>head -n 5 numbers.txt</span></code></pre></td></tr></table></div></div>
        </div>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>tail -n 5 numbers.txt</span></code></pre></td></tr></table></div></div>
        </div>

<p>What do you think <code>n</code> stands for? Does it mean the same thing in all the commands?</p>

<h3>writing without opening a file</h3>

<p>You can also write to a file without opening it up, using the <code>echo</code> command and then piping the result of the echo command into a file:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>$</span>
<span class='line-number'>$</span>
<span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>echo "sixteen" > numbers.txt</span><span class='line command'>tail numbers.txt</span><span class='line command'>echo "seventeen" > numbers.txt</span><span class='line command'>tail numbers.txt</span></code></pre></td></tr></table></div></div>
        </div>

<h3>waiting for input</h3>

<p>The <code>tail</code> command has an option <code>-f</code> that makes it so that it keeps waiting for input.</p>

<p>Open a second terminal window, and go to the words directory.</p>

<p>Now, in one terminal window, say</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>tail -f numbers.txt</span></code></pre></td></tr></table></div></div>
        </div>

<p>And in the other directory, say:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>$</span>
<span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>echo "eighteen" > numbers.txt</span><span class='line command'>echo "nineteen" > numbers.txt</span><span class='line command'>echo "twenty" > numbers.txt</span></code></pre></td></tr></table></div></div>
        </div>

<h3>cron</h3>

<p>Write a script that puts a timestamp in a log file.</p>

<p>In bash this is a bit easier than in Ruby, let&#8217;s write the script both ways.</p>

<p>Let&#8217;s call the script <code>timytime</code>.</p>

<p>In bash (<code>timeytime.sh</code>):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>
</span><span class='line'><span class="nb">echo </span>date &gt; ~/timeytime.log
</span></code></pre></td></tr></table></div></figure>

<p>Chmod +x it.</p>

<p>Run it: <code>./timeytime.sh</code></p>

<p>Totally works.</p>

<p>In Ruby (<code>timeytime.rb</code>):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">#!/usr/bin/env ruby</span>
</span><span class='line'>
</span><span class='line'><span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;~/timeytime.log&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">file</span><span class="o">|</span>
</span><span class='line'>  <span class="n">file</span><span class="o">.</span><span class="n">puts</span> <span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">to_s</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>Chmod +x it, and run it: <code>./timeytime.rb</code>. Broken.</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<br></pre></td><td class='code'><pre><code><span class='line output'>./timeytime.rb:3:in `initialize': No such file or directory - ~/timeytime.log (Errno::ENOENT)</span></code></pre></td></tr></table></div></div>
        </div>

<p>It doesn&#8217;t like not having a file to open. We need to make it first:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>&nbsp;</span>
<br></pre></td><td class='code'><pre><code><span class='line output'>.../fileutils.rb:1165:in `initialize': No such file or directory - ~/timeytime.log (Errno::ENOENT)</span></code></pre></td></tr></table></div></div>
        </div>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">#!/usr/bin/env ruby</span>
</span><span class='line'>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;fileutils&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="no">FileUtils</span><span class="o">.</span><span class="n">touch</span> <span class="s1">&#39;~/timeytime.log&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;~/timeytime.log&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">file</span><span class="o">|</span>
</span><span class='line'>  <span class="n">file</span><span class="o">.</span><span class="n">puts</span> <span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">to_s</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>OK, clearly it didn&#8217;t like the <code>~</code>. We need to give it the full path to the file we want it to make:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">#!/usr/bin/env ruby</span>
</span><span class='line'>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;fileutils&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">filename</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="s1">&#39;../../timeytime.log&#39;</span><span class="p">,</span> <span class="bp">__FILE__</span><span class="p">)</span>
</span><span class='line'><span class="no">FileUtils</span><span class="o">.</span><span class="n">touch</span> <span class="n">filename</span>
</span><span class='line'>
</span><span class='line'><span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">file</span><span class="o">|</span>
</span><span class='line'>  <span class="n">file</span><span class="o">.</span><span class="n">puts</span> <span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">to_s</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>There, this now works.</p>

<p>Now pick one and rename it to <code>timetime</code>, and put it in your path:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mv timeytime.rb ~/bin/timeytime
</span></code></pre></td></tr></table></div></figure>

<p>Now, edit your crontab so that it runs this script every minute:</p>

<p><strong>NOTE</strong> This will open in the default text editor, which is vim. Dammit.</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
</pre></td><td class='code'><pre><code><span class='line command'>crontab -e</span></code></pre></td></tr></table></div></div>
        </div>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>* * * * * ~/bin/timeytime
</span></code></pre></td></tr></table></div></figure>

<p>Now, tail the timeytime.log file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>tail -f ~/timeytime.log
</span></code></pre></td></tr></table></div></figure>

    
    
      <footer>
        
        
          <div class="sharing">
  
  
</div>

        
      </footer>
    
  </article>


</div>


  <span class="toggle-sidebar"></span>

<aside class="sidebar">
  <div> </div>
</aside>

<script src="/javascripts/sidebar.js" type="text/javascript"> </script>


    </div>

    <div class="footer">
  <p>
    All materials licensed <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0</a>&nbsp;
    <img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png" />
  </p>
</div>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-42709122-1', 'jumpstartlab.com');
ga('send', 'pageview');
</script>
  </div>

  


  <div class="slide-out-div">
  <a class="handle" href="#">Feedback</a>
  <h3>Have Feedback?</h3>
  <p>Did you find an error? Something confusing? We'd love your help:</p>
  <ul>
    <li><a href="#" id="edit_source">Edit the source code of this page directly on GitHub</a></li>
    <li><a href="https://github.com/JumpstartLab/curriculum/issues">Create a new issue on the project's GitHub page</a></li>
  </ul>
  <p>Thanks!</p>
</div>

<script>
  $(function(){
    var pathname = window.location.pathname.replace( ".html", ".markdown" );
    var github_url = "https://github.com/JumpstartLab/curriculum/blob/master/source" + pathname;
    $("a#edit_source").attr('href', github_url);
  });
</script>

</body>
</html>
