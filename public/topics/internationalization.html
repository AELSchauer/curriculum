
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Internationalization - Jumpstart Lab Curriculum</title>
  <meta name="author" content="Jumpstart Lab">

  
  <meta name="description" content="Internationalization                              Internationalization is one of those things people always plan to &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://tutorials.jumpstartlab.com/topics/internationalization.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection, print" rel="stylesheet" type="text/css">

  <link href="/atom.xml" rel="alternate" title="Jumpstart Lab Curriculum" type="application/atom+xml">

  <!-- TAB SLIDE OUT -->
  <script src="/javascripts/jquery-1.3.2.min.js" type="text/javascript"></script>
  <script src="/javascripts/jquery.tabSlideOut.v1.3.js"></script>

  <!-- SEARCH -->
  <script src="/search.js"></script>

  <script type="text/javascript">
    $(function(){
      $('.slide-out-div').tabSlideOut({
        tabHandle: '.handle',                     //class of the element that will become your tab
        pathToTabImage: '/images/feedback_tabv2.png', //path to the image for the tab //Optionally can be set using css
        imageHeight: '130px',                     //height of tab image           //Optionally can be set using css
        imageWidth: '36px',                       //width of tab image            //Optionally can be set using css
        tabLocation: 'left',                      //side of screen where tab lives, top, right, bottom, or left
        speed: 300,                               //speed of animation
        action: 'click',                          //options: 'click' or 'hover', action to trigger animation
        topPos: '200px',                          //position from the top/ use if tabLocation is left or right
        leftPos: '20px',                          //position from left/ use if tabLocation is bottom or top
        fixedPosition: true                      //options: true makes it stick(fixed position) on scroll
        });
      });
  </script>

  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

</head>

<body  >
  <header role="banner">
    <hgroup>
  <h1>Jumpstart Lab Curriculum</h1>
  
</hgroup>

  </header>

  <nav role="navigation">
    <ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:tutorials.jumpstartlab.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>

<ul class="main-navigation">
  <li><a href="/">Curriculum Index</a></li>
  <li><div id="search">
  <form>
    <input type="text" id="st-search-input" class="st-search-input" />
  </form>
</div>
</li>
</ul>
  </nav>

  <div id="main">
    <div id="content">
      <div>
  <article role="article">
    
    
      <header>
        <h1 class="entry-title">
          Internationalization
        </h1>
        
      </header>
    
    <p>Internationalization is one of those things people always plan to do&#8230;eventually. We&#8217;re so lazy about it, that&#8217;s probably the last time you&#8217;ll see anyone actually spell out the word &#8211; instead we opt for the compressed shorthand &quot;i18n&quot; (which means &quot;an &#8216;i&#8217;, then 18 letters, then an &#8216;n&#8217;&quot;).</p>

<p>There a few different areas in your Rails applications which can utilize i18n:</p>

<ul>
<li>Model validations</li>
<li>Controller flash messages</li>
<li>View template content</li>
</ul>

<p>Let&#8217;s first talk about the locale file.</p>

<h3>Setup</h3>

<div class="note">
<p>Get the Blogger project from GitHub and run setup procedures:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone git://github.com/JumpstartLab/blogger_advanced.git
</span><span class='line'>cd blogger_advanced
</span><span class='line'>bundle
</span><span class='line'>bundle exec rake db:setup
</span><span class='line'>bundle exec rake</span></code></pre></td></tr></table></div></figure>

<p>All existing tests should pass. Optionally, run the tests continuously while developing by running <code>guard</code></p>
</div>

<h3>Locale Files</h3>

<p>Every Rails application has a folder <code>config/locales</code> in which you&#8217;ll find an <code>en.yml</code>. Let&#8217;s open that now for experimentation throughout this tutorial.</p>

<h4>Locale File Structure</h4>

<p>The locale file is written in YAML (<a href="http://www.yaml.org/">http://www.yaml.org/</a>), a plain-text language for writing simple data objects. The locale file makes use primarily of hashes.</p>

<h5>YAML Experiments</h5>

<p>Write a plain text file named <code>sample.yml</code> with these contents:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">student</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="l-Scalar-Plain">first_name</span><span class="p-Indicator">:</span> <span class="s">&quot;John&quot;</span>
</span><span class='line'>  <span class="l-Scalar-Plain">last_name</span><span class="p-Indicator">:</span>  <span class="s">&quot;Smith&quot;</span>
</span><span class='line'>  <span class="l-Scalar-Plain">grades</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">88</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">92</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">93</span>
</span><span class='line'>  <span class="l-Scalar-Plain">classes</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="l-Scalar-Plain">1st_period</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Science</span>
</span><span class='line'>    <span class="l-Scalar-Plain">2nd_period</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Math</span>
</span></code></pre></td></tr></table></div></figure>

<p>Load an IRB session in the same directory and try the following:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">IRB</h1>
          <div class="container"><div class="irb"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>2.1.1 :001&gt;</span>
<span class='line-number'>2.1.1 :002&gt;</span>
<span class='line-number'>2.1.1 :003&gt;</span>
</pre></td><td class='code'><pre><code><span class='line command'>require 'yaml'</span><span class='line command'>output = YAML.load(File.open('./sample.yml'))</span><span class='line command'>output['student']['first_name']</span></code></pre></td></tr></table></div></div>
        </div>

<p>Our YAML file specifies a hash with a top level key <code>'student'</code> which has a nested key <code>'first_name'</code> which holds the value <code>&quot;John&quot;</code>.</p>

<p>Figure out how, using YAML, to extract the values <code>&quot;Smith&quot;</code>, <code>92</code>, and <code>'Math'</code>.</p>

<h5>YAML in Locale Files</h5>

<p>The Rails i18n system is built around having a single YAML file per language. You create the file with the language identifier and a <code>.yml</code> extension under the <code>locales</code> folder.</p>

<p>Every locale file in a Rails app is going to have the language identifier as the root key. In the default file, that&#8217;s <code>&quot;en&quot;</code>. Some of the most common other identifiers include <code>&quot;es&quot;</code> (Spanish), <code>&quot;fr&quot;</code> (French), and <code>&quot;de&quot;</code> (German).</p>

<p>The keys under that language identifier should, generally speaking, be <strong>identical</strong> across the various locale files.</p>

<h5>The Big Goal</h5>

<p>In a well-built Rails application, the locale file is the <strong>only</strong> place in the application where user-facing text is defined.</p>

<h3>Determining Locale / Language</h3>

<p>There&#8217;s often a correlation between country and language preference, but it&#8217;s naive to consider one indicative of the other.</p>

<p>A well built solution will detect the language the user <em>probably</em> wants and allows them to override that choice. Let&#8217;s look at some methods of determining and tracking a user&#8217;s locale code.</p>

<h4>Geolocation</h4>

<p>You could use a geolocation service to determine a user&#8217;s location and set the language accordingly. Don&#8217;t ever do this, seriously.</p>

<h4>HTTP Headers</h4>

<p>One of the simplest solutions is built right into the HTTP 1.1 spec. Browsers will, with each request, submit a header named <code>&quot;HTTP_ACCEPT_LANGUAGE&quot;</code>.</p>

<p>The value under that name can be a single locale identifier or a comma-separated list of preferences. These are set by the browser at either install or load time and are likely detected from the host operating system. The user can typically override this setting somewhere in the browser configuration, but they probably don&#8217;t know how.</p>

<p>If you&#8217;re dealing with <em>public, unauthenticated users</em>, reacting to the <code>&quot;HTTP_ACCEPT_LANGUAGE&quot;</code> is your best bet.</p>

<h5>Seeing the <code>HTTP_ACCEPT_LANGUAGE</code></h5>

<p>Assuming you have the sample project available and running, go to <code>ArticlesController#index</code> and add this exception:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">index</span>
</span><span class='line'>  <span class="k">raise</span> <span class="n">request</span><span class="o">.</span><span class="n">env</span><span class="o">[</span><span class="s2">&quot;HTTP_ACCEPT_LANGUAGE&quot;</span><span class="o">]</span>
</span><span class='line'>  <span class="vi">@articles</span><span class="p">,</span> <span class="vi">@tag</span> <span class="o">=</span> <span class="no">Article</span><span class="o">.</span><span class="n">search_by_tag_name</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:tag</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>You&#8217;ll probably see this output:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">en</span><span class="o">-</span><span class="no">US</span><span class="p">,</span><span class="n">en</span><span class="p">;</span><span class="n">q</span><span class="o">=</span><span class="mi">0</span><span class="o">.</span><span class="mi">8</span>
</span></code></pre></td></tr></table></div></figure>

<p>My browser is saying that my top choice locale is <code>&quot;en-US&quot;</code> (US English), but I&#8217;ll settle for <code>&quot;en&quot;</code> (English) and consider that about 80% as good as the first choice.</p>

<h5>Which Locales are Available?</h5>

<p>From a Rails console, try this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">I18n</span><span class="o">.</span><span class="n">available_locales</span>
</span></code></pre></td></tr></table></div></figure>

<p>Most of those represent validation error messages and such that are built in to Rails.</p>

<p>Let&#8217;s try an experiment. Create a file <code>config/locales/arr.yml</code> with this content:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">arr</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="l-Scalar-Plain">hello</span><span class="p-Indicator">:</span> <span class="s">&quot;Ahoy,</span><span class="nv"> </span><span class="s">Matey!&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>Then <em>Exit</em> your Rails console session, start it again, and run <code>I18n.available_locales</code> again. You should now see <code>:arr</code> available.</p>

<h5>A Recommendation</h5>

<p>Unless you have a compelling case for it, build your app using one, two, or three locales. Don&#8217;t try and support everything from the beginning, you&#8217;ll just make a mess and do a bunch of unnecessary work. If everything is extracted to work from locale files correctly, then adding new languages as you prepare to ship is very easy.</p>

<h4>Setting the Locale via HTTP Headers</h4>

<p>Let&#8217;s implement a <code>before_filter</code> which will set the current locale based on the request&#8217;s HTTP headers. In <code>ApplicationController</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">ApplicationController</span> <span class="o">&lt;</span> <span class="no">ActionController</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="n">before_filter</span> <span class="ss">:set_locale</span>
</span><span class='line'>
</span><span class='line'><span class="kp">private</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">set_locale</span>
</span><span class='line'>    <span class="no">I18n</span><span class="o">.</span><span class="n">locale</span> <span class="o">=</span> <span class="no">LocaleSetter</span><span class="o">.</span><span class="n">from</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">env</span><span class="o">[</span><span class="s2">&quot;HTTP_ACCEPT_LANGUAGE&quot;</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">module</span> <span class="nn">LocaleSetter</span>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">from</span><span class="p">(</span><span class="n">accepts</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="n">accept_list</span><span class="p">(</span><span class="n">accepts</span><span class="p">)</span> <span class="o">&amp;</span> <span class="no">I18n</span><span class="o">.</span><span class="n">available_locales</span><span class="p">)</span><span class="o">.</span><span class="n">first</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">accept_list</span><span class="p">(</span><span class="n">accepts</span><span class="p">)</span>
</span><span class='line'>    <span class="n">accepts</span><span class="o">.</span><span class="n">downcase</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/\;q=\d[.\d]*/</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_sym</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>Check out the results from a controller by calling:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">raise</span> <span class="no">I18n</span><span class="o">.</span><span class="n">locale</span><span class="o">.</span><span class="n">inspect</span>
</span></code></pre></td></tr></table></div></figure>

<h4>Overriding the Locale</h4>

<p>It would be nice to be able to override the locale from the URL parameters. Imagine in testing, for instance, that we want to easily flip between languages.</p>

<p>Let&#8217;s modify that earlier approach:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">ApplicationController</span> <span class="o">&lt;</span> <span class="no">ActionController</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="n">before_filter</span> <span class="ss">:set_locale</span>
</span><span class='line'>
</span><span class='line'><span class="kp">private</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">set_locale</span>
</span><span class='line'>    <span class="no">I18n</span><span class="o">.</span><span class="n">locale</span> <span class="o">=</span> <span class="no">LocaleSetter</span><span class="o">.</span><span class="n">from_param</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:locale</span><span class="o">]</span><span class="p">)</span> <span class="o">||</span>
</span><span class='line'>                  <span class="no">LocaleSetter</span><span class="o">.</span><span class="n">from_http</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">env</span><span class="o">[</span><span class="s2">&quot;HTTP_ACCEPT_LANGUAGE&quot;</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">module</span> <span class="nn">LocaleSetter</span>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">from_param</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">param</span>
</span><span class='line'>      <span class="n">locale</span> <span class="o">=</span> <span class="n">sanitize_param</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
</span><span class='line'>      <span class="no">I18n</span><span class="o">.</span><span class="n">available_locales</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="n">locale</span><span class="p">)</span> <span class="p">?</span> <span class="n">locale</span> <span class="p">:</span> <span class="kp">false</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">sanitize_param</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
</span><span class='line'>    <span class="n">param</span><span class="o">.</span><span class="n">downcase</span><span class="o">.</span><span class="n">to_sym</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">from_http</span><span class="p">(</span><span class="n">accepts</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="n">accept_list</span><span class="p">(</span><span class="n">accepts</span><span class="p">)</span> <span class="o">&amp;</span> <span class="no">I18n</span><span class="o">.</span><span class="n">available_locales</span><span class="p">)</span><span class="o">.</span><span class="n">first</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">accept_list</span><span class="p">(</span><span class="n">accepts</span><span class="p">)</span>
</span><span class='line'>    <span class="n">accepts</span><span class="o">.</span><span class="n">downcase</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/\;q=\d[.\d]*/</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_sym</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>Now setting the locale in the URL (like <code>http://localhost:3000/articles?locale=arr</code>) will override the HTTP header.</p>

<h4>Appending the Locale to All URLs</h4>

<p>The above approach generally works, but when you click any link on the site it&#8217;ll drop the locale.</p>

<p>Instead, let&#8217;s embed the locale parameter into every URL. All Rails URL helpers make use of the <code>url_for</code> method, which itself calls a method named <code>default_url_options</code>. If we override that method, we can set the option for every URL.</p>

<p>In our <code>ApplicationController</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">default_url_options</span><span class="p">(</span><span class="n">options</span> <span class="o">=</span> <span class="p">{})</span>
</span><span class='line'>  <span class="p">{</span> <span class="n">locale</span><span class="p">:</span> <span class="no">I18n</span><span class="o">.</span><span class="n">locale</span> <span class="p">}</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>That&#8217;s it!</p>

<h4>Account-Based Locale</h4>

<p>When a user registers with your system, you should store their preferred locale in the user record. Whenever they login, regardless of the HTTP header, use the locale stored in their profile. Allow them to change it along with their other attributes.</p>

<p>Why bother with this? I am always going to prefer English, whether I&#8217;m using my machine from the US or using a friend&#8217;s machine in France. Do the smart thing.</p>

<h4><code>locale_detector</code></h4>

<p>Thinking this is too much work? You might try out <a href="https://github.com/Exvo/locale_detector">https://github.com/Exvo/locale_detector</a> which at least takes care of the HTTP header part for you.</p>

<h3>Model Validations</h3>

<p>Ok ok, we&#8217;ve set the locale. Now what can we <strong>do</strong> with it?</p>

<p>Let&#8217;s put this into practice at the model layer.</p>

<h4>The <code>:message</code> Option</h4>

<p>The built in validations have an infrequently used option <code>:message</code> like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">validates_presence_of</span> <span class="ss">:title</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="s2">&quot;needs a title genius&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>Now that you know it&#8217;s there, <strong>don&#8217;t ever use this</strong>.</p>

<p>Why? The concept of a validation error is a business-logic-level concern and it totally belongs in the model. The specific message that explains the error, however, has <em>nothing</em> to do with business logic and it&#8217;s absolutely wrong to put it in the model layer.</p>

<h4>Validation Messages in Translation Files</h4>

<p>Instead, define your validation messages in the locale files.</p>

<p>Rails will attempt several lookups in your locale file automatically. The first hit will be used. The lookup order is:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">activerecord</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">[model_name</span><span class="o">].</span><span class="n">attributes</span><span class="o">.</span><span class="n">[attribute_name</span><span class="o">]</span>
</span><span class='line'><span class="n">activerecord</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">[model_name</span><span class="o">]</span>
</span><span class='line'><span class="n">activerecord</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">messages</span>
</span><span class='line'><span class="n">errors</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">[attribute_name</span><span class="o">]</span>
</span><span class='line'><span class="n">errors</span><span class="o">.</span><span class="n">messages</span>
</span></code></pre></td></tr></table></div></figure>

<p>To really understand how this works, you need to pull up the Rails guide here: <a href="http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models">http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models</a></p>

<h5>An Example with Article Validation in Arr</h5>

<p>I want to deal with the case where a pirate attempts to write an article without a title. The model already has this validation:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">validates</span> <span class="ss">:title</span><span class="p">,</span> <span class="n">presence</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span> <span class="n">uniqueness</span><span class="p">:</span> <span class="kp">true</span>
</span></code></pre></td></tr></table></div></figure>

<p>To figure out what key I need to define, I look at the hierarchy above. Let&#8217;s first make the message specific just to this model/attribute, then look at how we could generalize it.</p>

<p>I want to match this pattern:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">activerecord</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">[model_name</span><span class="o">].</span><span class="n">attributes</span><span class="o">.</span><span class="n">[attribute_name</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>

<p>Which here is:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">activerecord</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">article</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">title</span>
</span></code></pre></td></tr></table></div></figure>

<p>But I need to get specific about which validation message I&#8217;m supplying. If you&#8217;ve pulled up the documentation linked above, scroll down to the heading &quot;5.1.2 Error Message Interpolation&quot; and look at the table.</p>

<p>Find <code>presence</code> on the third line. The <code>message</code> column lists the key <code>:blank</code>. Therefore, the locale lookup path for our title blank message is:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">activerecord</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">article</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">blank</span>
</span></code></pre></td></tr></table></div></figure>

<p>Easy-peasy! You&#8217;ll have to look up this documentation every time you want to use the feature, guaranteed. :)</p>

<p>Here&#8217;s how to write it in <code>arr.yml</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">arr</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="l-Scalar-Plain">hello</span><span class="p-Indicator">:</span> <span class="s">&quot;Ahoy,</span><span class="nv"> </span><span class="s">Matey!&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="l-Scalar-Plain">activerecord</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="l-Scalar-Plain">errors</span><span class="p-Indicator">:</span>
</span><span class='line'>      <span class="l-Scalar-Plain">models</span><span class="p-Indicator">:</span>
</span><span class='line'>        <span class="l-Scalar-Plain">article</span><span class="p-Indicator">:</span>
</span><span class='line'>          <span class="l-Scalar-Plain">attributes</span><span class="p-Indicator">:</span>
</span><span class='line'>            <span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span>
</span><span class='line'>              <span class="l-Scalar-Plain">blank</span><span class="p-Indicator">:</span> <span class="s">&quot;Ye</span><span class="nv"> </span><span class="s">title</span><span class="nv"> </span><span class="s">musn&#39;t</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">blank,</span><span class="nv"> </span><span class="s">varmit!&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>Then try it out in your Rails console:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">IRB</h1>
          <div class="container"><div class="irb"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>2.1.1 :001&gt;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>2.1.1 :002&gt;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>2.1.1 :003&gt;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>2.1.1 :004&gt;</span>
<span class='line-number'>&nbsp;</span>
<br></pre></td><td class='code'><pre><code><span class='line command'>I18n.locale = :arr</span><span class='line output'>=&gt; :arr</span><span class='line command'>a = Article.new(body: "Arrr!")</span><span class='line output'>=&gt; #&lt;Article id: nil, title: nil, body: "Arrr!", created_at: nil, updated_at: nil&gt;</span><span class='line command'>a.save</span><span class='line output'>=&gt; false</span><span class='line command'>a.errors.full_messages</span><span class='line output'>=&gt; ["Title translation missing: arr.activerecord.errors.models.article.attributes.title.blank"]</span></code></pre></td></tr></table></div></div>
        </div>

<p>Say whaaaat? Oh, there&#8217;s this little wrinkle: locale files are parsed at starup. You need to stop/restart your console and/or server to see the difference. Try it again and you should see this:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">IRB</h1>
          <div class="container"><div class="irb"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>2.1.1 :001&gt;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>a.errors.full_messages</span><span class='line output'>=&gt; ["Title Ye title musn't be blank, varmit!"]</span></code></pre></td></tr></table></div></div>
        </div>

<p>That&#8217;s awesome as long as we don&#8217;t need our messages to make sense.</p>

<h5>Note on Outputting Messages</h5>

<p>This part is particularly icky. If you use the <code>full_messages</code> method like the example above, as far as I can tell, you&#8217;re always going to get the attribute name appended to the front of the error message.</p>

<p>The solution, when you go to output the error messages, is to do something like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">a</span> <span class="o">=</span> <span class="no">Article</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">body</span><span class="p">:</span> <span class="s2">&quot;Making Errors&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">a</span><span class="o">.</span><span class="n">save</span>
</span><span class='line'><span class="n">a</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">collect</span><span class="p">{</span><span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="n">e</span><span class="o">.</span><span class="n">last</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

<h4>Abstracting Validation Messages</h4>

<p>Earlier we saw the lookup chain that would be followed and chose the most specific case for our <code>Article#title</code>. If you have many models, though, it&#8217;s probably a huge pain and unwise to rewrite the same validation message several times in the locale file.</p>

<p>Let&#8217;s go further down the chain. To remind you, the priorities are:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">activerecord</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">[model_name</span><span class="o">].</span><span class="n">attributes</span><span class="o">.</span><span class="n">[attribute_name</span><span class="o">]</span>
</span><span class='line'><span class="n">activerecord</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">[model_name</span><span class="o">]</span>
</span><span class='line'><span class="n">activerecord</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">messages</span>
</span><span class='line'><span class="n">errors</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">[attribute_name</span><span class="o">]</span>
</span><span class='line'><span class="n">errors</span><span class="o">.</span><span class="n">messages</span>
</span></code></pre></td></tr></table></div></figure>

<p>The top-two are specific to a single model, but the bottom three are more general. Here&#8217;s how we could reappropriate our translation about the title to all presence validations in the locale:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">arr</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="l-Scalar-Plain">hello</span><span class="p-Indicator">:</span> <span class="s">&quot;Ahoy,</span><span class="nv"> </span><span class="s">Matey!&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="l-Scalar-Plain">activerecord</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="l-Scalar-Plain">errors</span><span class="p-Indicator">:</span>
</span><span class='line'>      <span class="l-Scalar-Plain">messages</span><span class="p-Indicator">:</span>
</span><span class='line'>        <span class="l-Scalar-Plain">blank</span><span class="p-Indicator">:</span> <span class="s">&quot;Ye</span><span class="nv"> </span><span class="s">title</span><span class="nv"> </span><span class="s">musn&#39;t</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">blank,</span><span class="nv"> </span><span class="s">varmit!&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>But that&#8217;s going to complain about the <code>title</code> even when the validation is on the <code>body</code>. Instead, we use a special interpolation syntax:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">arr</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="l-Scalar-Plain">hello</span><span class="p-Indicator">:</span> <span class="s">&quot;Ahoy,</span><span class="nv"> </span><span class="s">Matey!&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="l-Scalar-Plain">activerecord</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="l-Scalar-Plain">errors</span><span class="p-Indicator">:</span>
</span><span class='line'>      <span class="l-Scalar-Plain">messages</span><span class="p-Indicator">:</span>
</span><span class='line'>        <span class="l-Scalar-Plain">blank</span><span class="p-Indicator">:</span> <span class="s">&quot;Ye</span><span class="nv"> </span><span class="s">%{attribute}</span><span class="nv"> </span><span class="s">musn&#39;t</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">blank,</span><span class="nv"> </span><span class="s">varmit!&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<h5>Localizing Attributes</h5>

<p>That&#8217;s great until you implement your Spanish translation like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">es</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="l-Scalar-Plain">hello</span><span class="p-Indicator">:</span> <span class="s">&quot;Buenos</span><span class="nv"> </span><span class="s">Dias!&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="l-Scalar-Plain">activerecord</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="l-Scalar-Plain">errors</span><span class="p-Indicator">:</span>
</span><span class='line'>      <span class="l-Scalar-Plain">messages</span><span class="p-Indicator">:</span>
</span><span class='line'>        <span class="l-Scalar-Plain">blank</span><span class="p-Indicator">:</span> <span class="s">&quot;Necessita</span><span class="nv"> </span><span class="s">un</span><span class="nv"> </span><span class="s">%{attribute}!&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>Then your user gets the message <code>&quot;Necessita un title&quot;</code> instead of <code>&quot;Necessita un titulo&quot;</code>. You need to specify how the <code>title</code> attribute should be localized. You&#8217;d add it to the locale file like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">es</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="l-Scalar-Plain">hello</span><span class="p-Indicator">:</span> <span class="s">&quot;Buenos</span><span class="nv"> </span><span class="s">Dias!&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="l-Scalar-Plain">activerecord</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="l-Scalar-Plain">errors</span><span class="p-Indicator">:</span>
</span><span class='line'>      <span class="l-Scalar-Plain">messages</span><span class="p-Indicator">:</span>
</span><span class='line'>        <span class="l-Scalar-Plain">blank</span><span class="p-Indicator">:</span> <span class="s">&quot;Necessita</span><span class="nv"> </span><span class="s">un</span><span class="nv"> </span><span class="s">%{attribute}!&quot;</span>
</span><span class='line'>    <span class="l-Scalar-Plain">attributes</span><span class="p-Indicator">:</span>
</span><span class='line'>      <span class="l-Scalar-Plain">article</span><span class="p-Indicator">:</span>
</span><span class='line'>        <span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span> <span class="s">&quot;titulo&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>Now your user will get the correct message and attribute name.</p>

<h3>Controllers &amp; Views</h3>

<p>You&#8217;re probably convinced that I18n is hard. The above ActiveRecord hoops are a bit much to jump through, but <em>much</em> of what you need to internationalize is easy to work with.</p>

<h4>The <code>t</code> Helper</h4>

<p>In your controllers and views you have access to a helper named <code>t</code>. You supply a key to <code>t</code> and it fetches the value from the current locale file. Nothing fancy to remember.</p>

<h5>Example Flash Message</h5>

<p>Returning to Pirate:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">arr</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="l-Scalar-Plain">articles</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="l-Scalar-Plain">not_found</span><span class="p-Indicator">:</span> <span class="s">&quot;Arr,</span><span class="nv"> </span><span class="s">thy</span><span class="nv"> </span><span class="s">article</span><span class="nv"> </span><span class="s">has</span><span class="nv"> </span><span class="s">jumped</span><span class="nv"> </span><span class="s">ship!&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>Then in my <code>ArticlesController</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">show</span>
</span><span class='line'>  <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>  <span class="k">unless</span> <span class="vi">@article</span>
</span><span class='line'>    <span class="n">flash</span><span class="o">[</span><span class="ss">:warning</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span> <span class="s1">&#39;articles.not_found&#39;</span>
</span><span class='line'>    <span class="n">redirect_to</span> <span class="n">articles_path</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>You use a dot notation to navigate through the YAML hierarchy to whatever key you want.</p>

<h5>Interpolating Arbitrary Values</h5>

<p>You can also interpolate arbitrary values into messages. Imagine you want to do something like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">arr</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="l-Scalar-Plain">articles</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="l-Scalar-Plain">not_found</span><span class="p-Indicator">:</span> <span class="s">&quot;Foolish</span><span class="nv"> </span><span class="s">%{user},</span><span class="nv"> </span><span class="s">thy</span><span class="nv"> </span><span class="s">article</span><span class="nv"> </span><span class="s">has</span><span class="nv"> </span><span class="s">jumped</span><span class="nv"> </span><span class="s">ship!&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>Then you pass in the data like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">flash</span><span class="o">[</span><span class="ss">:warning</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span> <span class="s1">&#39;articles.not_found&#39;</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">current_user</span><span class="o">.</span><span class="n">name</span>
</span></code></pre></td></tr></table></div></figure>

<p><em>Minor note:</em> the keys <code>:default</code> and <code>:scope</code> may not be used here.</p>

<h3>Topics We Haven&#8217;t Covered</h3>

<p>Internationalization goes deeper than you&#8217;d think. Here are some other areas of interest that you can read about in the guide/API:</p>

<ul>
<li>Pluralization</li>
<li>Dealing with Dates &amp; Times</li>
<li>Handling Exceptions (like missed lookups)</li>
</ul>

<h3>References</h3>

<ul>
<li>Rails I18n Guide: <a href="http://guides.rubyonrails.org/i18n.html">http://guides.rubyonrails.org/i18n.html</a></li>
</ul>

    
    
      <footer>
        
        
          <div class="sharing">
  
  
</div>

        
      </footer>
    
  </article>


</div>



    </div>

    <div class="footer">
  <p>
    All materials licensed <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0</a>&nbsp;
    <img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png" />
  </p>
</div>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-42709122-1', 'jumpstartlab.com');
ga('send', 'pageview');
</script>
  </div>

  


  <div class="slide-out-div">
  <a class="handle" href="#">Feedback</a>
  <h3>Have Feedback?</h3>
  <p>Did you find an error? Something confusing? We'd love your help:</p>
  <ul>
    <li><a href="#" id="edit_source">Edit the source code of this page directly on GitHub</a></li>
    <li><a href="https://github.com/JumpstartLab/curriculum/issues">Create a new issue on the project's GitHub page</a></li>
  </ul>
  <p>Thanks!</p>
</div>

<script>
  $(function(){
    var pathname = window.location.pathname.replace( ".html", ".markdown" );
    var github_url = "https://github.com/JumpstartLab/curriculum/blob/master/source" + pathname;
    $("a#edit_source").attr('href', github_url);
  });
</script>

</body>
</html>
